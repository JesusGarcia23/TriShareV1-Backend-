{"version":3,"sources":["Components/ThreeMap.js","Components/Likebtn.js","Components/CommentSection.js","Components/Editpost.js","Components/SinglePost.js","Components/PostForm.js","Components/user-pages/Signup.js","Components/user-pages/Login.js","Components/EditUser.js","Components/FollowContainer.js","Components/UserProfile.js","Components/Home.js","Components/HomeFeed.js","Components/WorldPost.js","Components/Navbar.js","api/service.js","App.js","serviceWorker.js","index.js"],"names":["ThreeMap","getData","a","url","props","this","then","initThree","camera","scene","renderer","console","log","container","document","getElementById","width","clientWidth","height","clientHeight","THREE","position","z","target","orbitControls","Orbitcontrols","autoRotate","enableZoom","ambi","add","spotLight","set","intensity","load","texture","geometry","Math","pi","scale","material","map","mesh","setClearColor","setPixelRatio","window","devicePixelRatio","setSize","appendChild","domElement","init","animate","requestAnimationFrame","render","style","id","Component","Likebtn","className","onClick","onLike","postId","theIcon","CommentSection","allComments","allPostComments","length","eachComment","textDecoration","to","user","_id","src","imageUrl","borderRadius","alt","username","comment","currentUser","type","placeholder","name","value","onChange","e","updateComment","handleComment","theImageId","Edit","image","exitEdit","class","onSubmit","submitUpdate","caption","handleUpdate","tags","exitFullscreen","theCanvas","getElementsByTagName","addEventListener","SinglePost","match","params","thePost","postValues","filter","eachItem","Fragment","modal","Editpost","handleEdit","onChangeValue","updatePost","goBack","history","owner","marginLeft","marginRight","thePostId","userId","thePostOwner","confirmDelete","checkOwner","preventDefault","ele","myDiv","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","theArray","myId","findIndex","theId","handleLike","isLiked","likes","createdAt","Date","toDateString","eachTag","fontSize","key","updateQuery","comments","showConfirm","warning","showCancel","confirmBtnText","confirmBtnBsStyle","cancelBtnBsStyle","confirmBtnCssClass","title","onConfirm","onDelete","onCancel","cancelDelete","PostForm","state","imageFile","redirect","canvasStyle","alignText","canvasContainer","createButton","formStyle","justifyContent","uploadPost","seePreview","files","size","newImg","URL","createObjectURL","changeFile","changeUrl","setState","changePreview","myInput","setAttribute","removePicture","myFileList","removeAttribute","setTimeout","formValues","postMade","message","handleSubmit","htmlFor","React","img","Signup","email","password","styling","exitSignup","Login","exitLogin","EditUser","bio","FollowContainer","users","following","followers","listFollowing","listFollowers","followingList","followingClasses","followerClasses","displayFollowingUsers","theUser","eachUser","indexOf","exitContainer","myUser","handleFollow","isFollowing","showFollowers","UserProfile","images","showEdit","followContainer","theUserId","profileId","pics","test","userFollowers","userDetails","classes","handleShowFollow","handleEditProfile","updateUser","pic","color","Home","showLogin","classesSign","showSignup","handleSignUp","HomeFeed","feedList","userList","allPosts","eachPost","sortedList","sort","b","fontWeight","WorldPost","arrayOfPosts","query","theQuery","toLowerCase","join","includes","NavBar","Navbar","bg","variant","expand","Toggle","aria-controls","Collapse","Nav","notifications","NavDropdown","eachNotification","imageTo","Item","href","fromWho","event","Divider","onLogout","as","revealLoginForm","revealSignupForm","service","axios","create","baseURL","errorHandler","err","handleUpload","theFile","post","res","data","catch","saveNewThing","newThing","App","imagePost","postImgUrl","appUrl","lastUrl","profileImgDefault","selectedFile","singlePost","queryInput","file_upload_change","formData","FormData","append","postNewExp","uploadData","response","withCredentials","theNewPost","newPost","clone","push","get_data_torender","get","get_notifications","notificationList","updateForm","currentTarget","changeImgUrl","makeNewUser","theData","finished","showSignupForm","showLoginForm","loginUser","responseFromServer","userDoc","syncCurrentUser","alert","undefined","logoutUser","delete","location","responseFromBack","theIndex","postToFind","handleDelete","postArray","splice","responseFromBackend","editPost","theValue","postList","split","imageList","captionToUse","tagToUse","finalArray","put","herokUrl","theValues","showEditUser","listUsers","reload","userToFollow","user1","user2","theIndex1","userToFind","theIndex2","newComment","showFollow","innerHTML","updateQueryBar","theTag","actualUrl","exact","path","onUserChange","renderPosts","worldRender","Boolean","hostname","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"uRAwIeA,E,2MArHbC,Q,sBAAU,4BAAAC,EAAA,6DACDC,EAAO,EAAKC,MAAZD,IADC,kBASDA,GATC,2C,wNAPLE,KAAKJ,UACVK,MAAK,WACA,EAAKC,e,wIAqBG,IAKPC,EAAQC,EAAOC,EAJZP,EAAOE,KAAKD,MAAZD,IACPQ,QAAQC,IAAI,UACZD,QAAQC,IAAIT,GAIZ,IAAIU,EAAYC,SAASC,eAAe,gBACpCC,EAAQH,EAAUI,YACpBC,EAASL,EAAUM,cAQrB,WACEV,EAAQ,IAAIW,SAIZZ,EAAS,IAAIY,oBAAwB,GAAIJ,EAAQE,EAAQ,EAAG,MAGrDG,SAASC,EAAI,EACpBd,EAAOe,OAAS,IAAIH,UAAc,EAAG,EAAG,GAIxC,IAAII,EAAgB,IAA4BC,IAAcjB,EAAQK,GACtEW,EAAcE,YAAa,EAC3BF,EAAcG,YAAa,EAG3B,IAAIC,EAAO,IAAIR,eAAmB,SAClCX,EAAMoB,IAAID,GAEV,IAAIE,EAAY,IAAIV,mBAAuB,UAC3CU,EAAUT,SAASU,IAAI,IAAK,IAAK,KACjCD,EAAUE,UAAY,GAEtBvB,EAAMoB,IAAIC,IAEG,IAAIV,iBAGVa,KAAK9B,GAAK,SAAS+B,GAGxB,IAAIC,EAAW,IAAIf,iBAAqB,IAAK,GAAc,EAAVgB,KAAKC,IACtDF,EAASG,OAAO,EAAG,EAAG,GACtB,IAAIC,EAAW,IAAInB,oBAAwB,CAAEoB,IAAKN,IAC9CO,EAAO,IAAIrB,OAAWe,EAAUI,GACpC9B,EAAMoB,IAAIY,OAGZ/B,EAAW,IAAIU,iBACNsB,cAAc,UACvBhC,EAASiC,cAAcC,OAAOC,kBAC9BnC,EAASoC,QAAQ9B,EAAOE,GACxBL,EAAUkC,YAAYrC,EAASsC,YAjDjCC,GAsDA,SAASC,IACPC,sBAAsBD,GAKtBxC,EAAS0C,OAAO3C,EAAOD,GAzDzB0C,K,+BA6DA,OAEA,6BAMI,yBACEG,MAAO,CACLnC,OAAQb,KAAKD,MAAMc,OACnBF,MAAOX,KAAKD,MAAMY,OAEpBsC,GAAG,sB,GAtHUC,aCGRC,EAPC,SAACpD,GAEb,OACI,4BAAQqD,UAAU,UAAUC,QAAS,kBAAMtD,EAAMuD,OAAOvD,EAAMwD,UAAS,uBAAGH,UAAWrD,EAAMyD,Y,OCqCpFC,EAvCQ,SAAC1D,GAIpB,IAAqB2D,EAsBrB,OACI,6BACC3D,EAAM4D,kBAxBUD,EAwBqB3D,EAAM4D,gBAvB5CrD,QAAQC,IAAImD,GACc,IAAvBA,EAAYE,OAEb,yBAAKR,UAAU,qBACdM,EAAYvB,KAAI,SAAA0B,GACf,OACE,yBAAKT,UAAU,kBACf,kBAAC,IAAD,CAAMJ,MAAO,CAACc,eAAgB,QAASC,GAAE,mBAAcF,EAAYG,KAAKC,MACxE,0BAAMb,UAAU,mBAAkB,yBAAKc,IAAG,UAAKL,EAAYG,KAAKG,UAAYnB,MAAO,CAACrC,MAAM,OAAQE,OAAO,OAAQuD,aAAa,GAAI,cAAc,QAASC,IAAI,mBAA7J,IAAuLR,EAAYG,KAAKM,SAAxM,MAEA,0BAAMlB,UAAU,eAAeS,EAAYU,cAOzC,4DAOPxE,EAAMyE,aACH,6BACA,2BAAOC,KAAK,OAAOC,YAAY,sBAAsBC,KAAK,UAAUvB,UAAU,eAAewB,MAAO7E,EAAMwE,QAASM,SAAU,SAAAC,GAAM/E,EAAMgF,cAAcD,MAC3J,4BAAQzB,QAAS,SAAAyB,GAAM/E,EAAMiF,cAAcF,EAAG/E,EAAMwD,UAApD,W,QCjCJ0B,EAAa,GAyBFC,EAxBF,SAACnF,GAAW,IACboF,EAAUpF,EAAVoF,MAKZ,OAJOA,IACCF,EAAaE,EAAMlB,KAEvB3D,QAAQC,IAAI0E,GAEZ,yBAAK7B,UAAU,yBACf,yBAAKA,UAAU,kBACf,gDACA,4BAAQC,QAAS,SAAAyB,GAAM/E,EAAMqF,SAASN,EAAGG,IAAc7B,UAAU,mBAAkB,uBAAGiC,MAAM,mBAEpF,0BAAMC,SAAU,SAAAR,GAAC,OAAI/E,EAAMwF,aAAaT,EAAGK,KACxC,uCACC,8BAAUV,KAAK,OAAOE,KAAK,UAAUD,YAAaS,EAAMK,QAASpC,UAAU,kBAAkBwB,MAAO7E,EAAMyF,QAASX,SAAU,SAAAC,GAAC,OAAI/E,EAAM0F,aAAaX,MACrJ,oCACA,2BAAOL,KAAK,OAAOE,KAAK,OAAOD,YAAaS,EAAMO,KAAMtC,UAAU,eAAewB,MAAO7E,EAAM2F,KAAMb,SAAU,SAAAC,GAAC,OAAI/E,EAAM0F,aAAaX,MAEtI,4BAAQ1B,UAAU,0BAAlB,mBCIZuC,EAAiB,WACnB,IAAIC,EAAYnF,SAASoF,qBAAqB,UAAU,GACxDvF,QAAQC,IAAIqF,GACmB,UAA3BA,EAAU5C,MAAMnC,OAClB+E,EAAU5C,MAAMnC,OAAS,OAEzB+E,EAAU5C,MAAMnC,OAAS,SAI7B0B,OAAOuD,iBAAiB,mBAAoBH,GAC5CpD,OAAOuD,iBAAiB,yBAA0BH,GAClDpD,OAAOuD,iBAAiB,sBAAuBH,GAC/CpD,OAAOuD,iBAAiB,qBAAsBH,GAE9C,IAyIeI,EAzII,SAAAhG,GAEjBO,QAAQC,IAAI,sBAAuBR,GAqBnC,IAOkB+E,EAsBZ7B,EAAKlD,EAAMiG,MAAMC,OAAOhD,GAMxBiD,EAJSnG,EAAMoG,WAAWC,QAAO,SAAAC,GACrC,OAAOA,EAASpC,MAAQhB,KAGH,GAEvB,OAAIiD,EAEA,kBAAC,IAAMI,SAAP,KACE,yBAAKlD,UAAU,cACZ8C,EAAQK,OACP,yBAAKnD,UAAU,4BACb,kBAACoD,EAAD,CAAUpB,SAAUrF,EAAM0G,WAAYtB,MAAOe,EAAST,aAAc1F,EAAM2G,cAAenB,aAAcxF,EAAM4G,cAEjH,yBAAKvD,UAAU,oBACb,4BAAQA,UAAU,aAAaC,QAhEzC,YAEEuD,EADmB7G,EAAM8G,QAAjBD,YA+DgD,uBAAGvB,MAAM,uBACzD,yBAAKnB,IAAKgC,EAAQY,MAAM3C,SAAUnB,MAAO,CAAErC,MAAO,OAAQE,OAAQ,OAAQuD,aAAc,GAAI2C,WAAY,GAAIC,YAAa,IAAM3C,IAAI,mBACnI,kBAAC,IAAD,CAAMrB,MAAO,CAAEc,eAAgB,QAAUC,GAAE,mBAAcmC,EAAQY,MAAM7C,MAAQiC,EAAQY,MAAMxC,UApCpF,SAAC4B,EAASlC,GAC3B,IAAIiD,EAAY,GACZC,EAAS,GACTC,EAAe,GAOnB,GANInD,IACFkD,EAASlD,EAAKC,KACZiC,IACFe,EAAYf,EAAQjC,IACpBkD,EAAejB,EAAQY,MAAM7C,KAE3BiD,IAAWC,EACb,OAAO,yBAAK/D,UAAU,oBAAmB,uBAAGA,UAAU,uBAAuBC,QAAS,SAAAyB,GAAO/E,EAAM0G,WAAW3B,EAAGmC,MAA1G,IAA6H,uBAAG7D,UAAU,8BAA8BC,QAAS,SAAAyB,GAAC,OAAI/E,EAAMqH,oBA0B5LC,CAAWnB,EAASnG,EAAMyE,cAE7B,6BACE,kBAAC,EAAD,CAAU1E,IAAKoG,EAAQf,MAAOtE,OA3G7B,OA2G6CF,MA1G9C,WA4GF,4BAAQ0C,QAtDG,SAACyB,GAClBA,EAAEwC,iBACF,IAvD8BC,EAuD1BC,EAAQ/G,SAASC,eAAe,iBAvDN6G,EAwDZC,GAvDZC,kBACNF,EAAIE,oBACKF,EAAIG,wBACbH,EAAIG,0BACKH,EAAII,qBACbJ,EAAII,uBACKJ,EAAIK,oBACbL,EAAIK,sBAEJtH,QAAQC,IAAI,qCAiGuB6C,UAAU,aAAY,uBAAGiC,MAAM,wCAA0C,yBAAKjC,UAAU,cAAf,WACtG,yBAAKA,UAAU,gBAEb,yBAAKA,UAAU,eAEb,yBAAKA,UAAU,gBAxE3B,SAAiBwB,EAAOiD,EAAUtE,GAChC,GAAIqB,EAAO,CACT,IAAMkD,EAAOlD,EAAMX,IAGnB,OAAI4D,EAASE,WAAU,SAAAC,GAAK,OAAIA,EAAM/D,MAAQ6D,MAAS,EAC7C,kBAAC,EAAD,CAASxE,OAAQvD,EAAMkI,WAAY1E,OAAQA,EAAQC,QAAQ,0BAE3D,kBAAC,EAAD,CAASF,OAAQvD,EAAMkI,WAAY1E,OAAQA,EAAQC,QAAQ,2BAiE1D0E,CAAQnI,EAAMyE,YAAa0B,EAAQiC,MAAOjC,EAAQjC,KACnD,0BAAMb,UAAU,aAAa8C,EAAQiC,MAAMvE,OAA3C,WAGF,yBAAKR,UAAU,cAzDT0B,EA0DMoB,EAAQkC,UAzDvB,IAAIC,KAAKvD,GAAGwD,kBA6DX,yBAAKlF,UAAU,eACZ8C,EAAQV,QACT,yBAAKpC,UAAU,WACZ8C,EAAQR,KAAKvD,KAAI,SAAAoG,GAChB,OAAO,kBAAC,IAAD,CAAMxE,GAAG,SAASf,MAAO,CAAEwF,SAAU,IAAMC,IAAKF,EAASlF,QAAS,SAAAyB,GAAC,OAAI/E,EAAM2I,YAAYH,KAAzF,IAAqGA,EAArG,UAMb,6BACG,kBAAC,EAAD,CAAgB/D,YAAazE,EAAMyE,YAAaD,QAASxE,EAAMwE,QAASZ,gBAAiBuC,EAAQyC,SAAU5D,cAAehF,EAAM2G,cAAe1B,cAAejF,EAAMiF,cAAezB,OAAQ2C,EAAQjC,SAKjL,IAAtBlE,EAAM6I,aACL,kBAAC,IAAD,CACEC,SAAO,EACPC,YAAU,EACVC,eAAe,WACfC,kBAAkB,SAClBC,iBAAiB,UACjBC,mBAAmB,gBACnBC,MAAM,gBACNC,UAAW,SAAAtE,GAAC,OAAI/E,EAAMsJ,SAASnD,EAAQjC,MACvCqF,SAAU,SAAAxE,GAAC,OAAI/E,EAAMwJ,iBATvB,sCAqBR,wCCYWC,E,2MA9KVC,MAAQ,CACTtF,SAAU,GACVuF,UAAW,GACXC,UAAU,G,EAWVC,YAAc,CACV/I,OAAQ,OACRF,MAAO,Q,EAGXE,OAAS,O,EACTF,MAAQ,U,EAERqC,MAAQ,CACJ,QAAW,QACX,aAAc,QACd,cAAe,OACfgE,YAAa,OACb,YAAa,QACb,OAAU,QACV6C,UAAW,SACX,OAAU,mB,EAGdC,gBAAkB,CACd,QAAW,QACX,OAAU,iBACV,gBAAiB,OACjB,OAAU,WACVjJ,OAAQ,OACRF,MAAO,Q,EAGXoJ,aAAe,CACX,QAAW,QACX,OAAU,Q,EAIdC,UAAY,CACRC,eAAgB,SAChBJ,UAAW,U,EAKfK,WAAa,SAACpF,GAClBA,EAAEwC,iBACFhH,QAAQC,IAAIuE,EAAE5D,S,EAGViJ,WAAa,SAACrF,GAIV,GAHAA,EAAEwC,iBAEFhH,QAAQC,IAAIuE,EAAE5D,OAAOkJ,OAClBtF,EAAE5D,OAAOkJ,MAAM,IAAMtF,EAAE5D,OAAOkJ,MAAM,GAAGC,MAAQ,SAAS,CAC3D,IAAIC,EAASC,IAAIC,gBAAgB1F,EAAE5D,OAAOkJ,MAAM,IAChD,EAAKrK,MAAM0K,WAAW3F,EAAE5D,OAAOkJ,MAAM,IACrC,EAAKrK,MAAM2K,UAAUJ,GAErB,EAAKK,SAAS,CACVxG,SAAUmG,EACVZ,UAAW5E,EAAE5D,OAAOkJ,MAAM,KAE9B,EAAKQ,cAAcN,GAEnB,IAAIO,EAAUpK,SAASC,eAAe,cACtCmK,EAAQC,aAAa,YAAY,GACjCD,EAAQzH,UAAY,qBAEpB,EAAKrD,MAAM0K,WAAW3F,EAAE5D,OAAOkJ,MAAM,K,EAIzCQ,cAAgB,SAAChG,GAEb,OAEI,yBAAK5B,MAAO,EAAK4G,aAChB,EAAKH,MAAMtF,UAAY,kBAAC,EAAD,CAAUrE,IAAK8E,EAAO/D,OAAQ,EAAKA,OAAQF,MAAO,EAAKA,U,EAavFoK,cAAgB,SAACjG,GACdA,EAAEwC,iBACD,IAAI0D,EAAavK,SAASC,eAAe,cACzCsK,EAAWC,gBAAgB,YAC3BD,EAAWpG,MAAQ,KACnBoG,EAAW5H,UAAY,YACvB,EAAKuH,SAAS,CAACxG,SAAU,GACzBuF,UAAW,M,mFApGK,IAAD,OACfwB,YAAW,WACP,EAAKP,SAAS,CAAChB,UAAU,MAAS,O,+BAsGjC,IAAD,SAC2C3J,KAAKD,MAAMoL,WAAnD3F,EADH,EACGA,QAASE,EADZ,EACYA,KAAMlB,EADlB,EACkBA,YAAa4G,EAD/B,EAC+BA,SACnC,OAAG5G,IAAgB4G,EAEf,yBAAKhI,UAAU,YACf,8CACCpD,KAAKD,MAAMoL,WAAWE,QACvB,0BAAMrI,MAAOhD,KAAKgK,UAAW1E,SAAUtF,KAAKD,MAAMuL,cAElD,yBAAKlI,UAAU,0BACf,yBAAKA,UAAU,oBACf,0BAAMJ,MAAOhD,KAAK8J,gBAAiB7G,GAAG,qBACrCjD,KAAK4K,cAAc5K,KAAKyJ,MAAMtF,aAK/B,yBAAKf,UAAU,sBAEf,0BAAMA,UAAU,0BAChB,2BAAOqB,KAAK,OAAOI,SAAU7E,KAAKmK,WAAYlH,GAAG,aAAaG,UAAU,cACxE,2BAAOmI,QAAQ,cAAf,IAA6B,0BAAMnI,UAAU,iBAAhB,iBAA7B,IAAkF,0BAAMA,UAAU,iBAAhB,KAAwC,uBAAGiC,MAAM,+BAGnI,0BAAMjC,UAAU,gBAAhB,yBAEA,0BAAMA,UAAU,sBAChB,4BAAQC,QAASrD,KAAK+K,cAAe3H,UAAU,aAA/C,IAA4D,0BAAMA,UAAU,iBAAhB,UAA5D,IAA0G,0BAAMA,UAAU,iBAAhB,KAAwC,uBAAGiC,MAAM,4BAK5J,yBAAKjC,UAAU,yBACf,0BAAMA,UAAU,4BAChB,0BAAMA,UAAU,aAAhB,aACA,8BAAUA,UAAU,kBAAkBqB,KAAK,OAAOG,MAAOY,EAASX,SAAW,SAAAC,GAAC,OAAI,EAAK/E,MAAM2G,cAAc5B,IAAIH,KAAK,aAEpH,0BAAMvB,UAAU,uBAChB,0BAAMA,UAAU,aAAhB,UACA,8BAAUA,UAAU,eAAeqB,KAAK,OAAOG,MAAOc,EAAMb,SAAW,SAAAC,GAAC,OAAI,EAAK/E,MAAM2G,cAAc5B,IAAIH,KAAK,OAAOD,YAAY,8BAIhI,4BAAQtB,UAAU,gBAAgBJ,MAAOhD,KAAK+J,cAA9C,0BAGA,+BAKCvF,GAAe4G,EACb,kBAAC,IAAD,CAAUrH,GAAG,WACf/D,KAAKyJ,MAAME,SACR,kBAAC,IAAD,CAAU5F,GAAG,WAEb,+C,GA3KOyH,IAAMtI,WCDzBuI,EAAM,GA4EKC,EA1EA,SAAC3L,GAkBRO,QAAQC,IAAIR,GAlBM,MAmBkBA,EAAMoL,WAAnC7G,EAnBW,EAmBXA,SAAUqH,EAnBC,EAmBDA,MAAOC,EAnBN,EAmBMA,SACxB,OAAe7L,EAAMyE,YAEb,kBAAC,IAAD,CAAUT,GAAE,mBAAchE,EAAMyE,YAAYP,OAIhD,yBAAKb,UAAWrD,EAAM8L,SAC1B,yBAAKzI,UAAU,uBAEf,yBAAKA,UAAU,uBACX,yBAAKA,UAAU,oBACf,yBAAKA,UAAU,mBACf,0CAEA,4BAAQC,QAAS,SAAAyB,GAAM/E,EAAM+L,WAAWhH,IAAK1B,UAAU,8BAA6B,uBAAGiC,MAAM,mBAG7F,0BAAMC,SAAUvF,EAAMuL,aAAclI,UAAU,kBAE9C,yBAAKA,UAAU,sBACf,yBAAKc,IAAKuH,EAAKpH,IAAI,gBAAgBjB,UAAU,eAG7C,yBAAKA,UAAU,mBACf,6CACA,2BAAOqB,KAAK,OAAOE,KAAK,WAAWC,MAAON,EAAUO,SAAW,SAAAC,GAAC,OAAI/E,EAAM2G,cAAc5B,OAGxF,yBAAK1B,UAAU,mBACf,0CACA,2BAAOqB,KAAK,QAAQE,KAAK,QAAQC,MAAO+G,EAAO9G,SAAW,SAAAC,GAAC,OAAI/E,EAAM2G,cAAc5B,OAGnF,yBAAK1B,UAAU,mBACf,6CACA,2BAAOqB,KAAK,WAAWE,KAAK,WAAWC,MAAOgH,EAAU/G,SAAW,SAAAC,GAAC,OAAI/E,EAAM2G,cAAc5B,OAG5F,yBAAK1B,UAAU,mBACf,mDACA,2BAAOqB,KAAK,OAAOI,SAtD7B,SAAoBC,GAGd,GAFAA,EAAEwC,iBACFhH,QAAQC,IAAIuE,EAAE5D,OAAOkJ,MAAM,IACxBtF,EAAE5D,OAAOkJ,MAAM,GAAGC,MAAQ,SAAS,CACtC,IAAIC,EAASC,IAAIC,gBAAgB1F,EAAE5D,OAAOkJ,MAAM,IAChDqB,EAAMnB,EACNvK,EAAM0K,WAAW3F,EAAE5D,OAAOkJ,MAAM,MAgDazF,KAAK,eAE9C,4BAAQvB,UAAU,iBAAlB,WAKHrD,EAAMsL,SAAY,iCAAQtL,EAAMsL,QAAd,OC3BZU,EA3CD,SAAChM,GAAW,IAAD,EAE2BA,EAAMoL,WAA1C7G,EAFS,EAETA,SAAUsH,EAFD,EAECA,SAClB,OAHiB,EAEWpH,YAGpB,kBAAC,IAAD,CAAUT,GAAE,UAIhB,yBAAKX,UAAWrD,EAAM8L,SAC1B,yBAAKzI,UAAU,sBAEX,yBAAKA,UAAU,mBACf,yBAAKA,UAAU,kBACf,wCAEA,4BAAQC,QAAS,SAAAyB,GAAM/E,EAAMiM,UAAUlH,IAAK1B,UAAU,oBAAmB,uBAAGiC,MAAM,mBAElF,0BAAMC,SAAWvF,EAAMuL,aAAclI,UAAU,iBAE/C,yBAAKA,UAAU,kBACf,8CACC,2BAAOwB,MAAON,EAAUO,SAAW,SAAAC,GAAC,OAAI/E,EAAM2G,cAAc5B,IAAIL,KAAK,OAAOE,KAAK,WAAWD,YAAY,cAGxG,yBAAKtB,UAAU,kBAChB,8CACA,2BAAOwB,MAAOgH,EAAU/G,SAAW,SAAAC,GAAC,OAAI/E,EAAM2G,cAAc5B,IAAIL,KAAK,WAAWE,KAAK,WAAWD,YAAY,iBAE3G,4BAAQtB,UAAU,gBAAlB,YAIL,iCACCrD,EAAMsL,SAAY,iCAAQtL,EAAMsL,QAAd,SCnCvBI,EAAM,GA4CKQ,EA1CE,SAAClM,GAAW,IACjByE,EAAyBzE,EAAzByE,YAAaqH,EAAY9L,EAAZ8L,QAuBrB,OACI,yBAAKzI,UAAWyI,GAChB,yBAAKzI,UAAU,kBACf,mDACA,4BAAQC,QAAS,SAAAyB,GAAM/E,EAAMqF,SAASN,IAAK1B,UAAU,mBAAkB,uBAAGiC,MAAM,mBAEhF,0BAAMC,SAAW,SAAAR,GAAC,OAAI/E,EAAMwF,aAAaT,EAAGN,KA1BjC,KAARiH,EACO,yBAAKvH,IAAKM,EAAYL,SAAUE,IAAI,gBAAgBjB,UAAU,oBAE7D,yBAAKc,IAAKuH,EAAKpH,IAAI,gBAAgBjB,UAAU,oBA0BxD,2BAAOqB,KAAK,OAAOI,SArBvB,SAAoBC,GAGhB,GAFAA,EAAEwC,iBACFhH,QAAQC,IAAIuE,EAAE5D,OAAOkJ,MAAM,IACxBtF,EAAE5D,OAAOkJ,MAAM,GAAGC,MAAQ,SAAS,CACtC,IAAIC,EAASC,IAAIC,gBAAgB1F,EAAE5D,OAAOkJ,MAAM,IAChDqB,EAAMnB,EACNvK,EAAM0K,WAAW3F,EAAE5D,OAAOkJ,MAAM,MAeShH,UAAU,uBAEnD,8BAAUqB,KAAK,OAAOE,KAAK,MAAMD,YAAaF,EAAY0H,IAAKrH,SAAU,SAAAC,GAAC,OAAI/E,EAAM0F,aAAaX,IAAI1B,UAAU,oBAC/G,qDCwBO+I,EA7DS,SAACpM,GACzBO,QAAQC,IAAIR,GADuB,IAE5BqM,EAA2ErM,EAA3EqM,MAAOC,EAAoEtM,EAApEsM,UAAWC,EAAyDvM,EAAzDuM,UAAWC,EAA8CxM,EAA9CwM,cAAeC,EAA+BzM,EAA/ByM,cAAehI,EAAgBzE,EAAhByE,YAC9DiI,EAAgB,GAGhBC,EAAmBH,EAAgB,+BAAiC,2BACpEI,EAAkBH,EAAgB,8BAAgC,0BAiBtE,SAASI,EAAsB/E,EAAUgF,GACzC,OAAGhF,EAASjE,OAAS,GAAKwI,EAAMxI,OAAS,GACrC6I,EAAgBL,EAAMhG,QAAO,SAAA0G,GACzB,OAAOjF,EAASkF,QAAQD,EAAS7I,MAAQ,KAE7C3D,QAAQC,IAAIkM,GACZnM,QAAQC,IAAIsM,EAAQR,WACjBI,EAActK,KAAI,SAAA2K,GACrB,OAAO,yBAAKrE,IAAKqE,EAAS7I,IAAKb,UAAU,qBACzC,0BAAMA,UAAU,sBAChB,yBAAKc,IAAK4I,EAAS3I,SAAUE,IAAI,iBAAiBjB,UAAU,sBAC5D,0BAAMC,QAAS,SAAAyB,GAAM/E,EAAMiN,cAAclI,KAAK,kBAAC,IAAD,CAAMf,GAAE,mBAAc+I,EAAS7I,KAAOb,UAAU,qBAAsB0J,EAASxI,YAE5HuI,GA5BL,SAAqBI,EAAQH,GAG7B,OAFIxM,QAAQC,IAAI0M,GACZ3M,QAAQC,IAAIuM,GACbA,EAAS7I,MAAQgJ,EAAOhJ,IACpBgJ,EAAOZ,UAAUU,QAAQD,EAAS7I,MAAQ,EAClC,4BAAQb,UAAU,0BAA0BC,QAAS,SAAAyB,GAAC,OAAI/E,EAAMmN,aAAaJ,EAAS7I,OAAM,uBAAGb,UAAU,8BAAb,eAE1F,4BAAQA,UAAU,0BAA0BC,QAAS,SAAAyB,GAAC,OAAI/E,EAAMmN,aAAaJ,EAAS7I,OAAM,uBAAGb,UAAU,6BAAb,aAIlG,8BAiBK+J,CAAYN,EAASC,QAI1B,0CAIP,OAEQ,yBAAK1J,UAAU,yBACf,yBAAKA,UAAU,gBACf,0BAAMA,UAAWuJ,EAAiBtJ,QAAS,SAAAyB,GAAC,OAAI/E,EAAMqN,cAActI,EAAG,eAAvE,aAAqG,0BAAM1B,UAAWsJ,EAAkBrJ,QAAS,SAAAyB,GAAC,OAAI/E,EAAMqN,cAActI,EAAG,eAAc,0BAAM1B,UAAU,iBAAhB,aAAtF,IAAuI,4BAAQC,QAAS,SAAAyB,GAAM/E,EAAMiN,cAAclI,IAAK1B,UAAU,iBAAgB,uBAAGiC,MAAM,kBAA1N,MAErG,yBAAKjC,UAAU,uBACdmJ,GAAiBK,EAAsBP,EAAW7H,GAClDgI,GAAiBI,EAAsBN,EAAW9H,MCoEhD6I,EArHK,SAACtN,GAAW,IACpBuN,EAA0DvN,EAA1DuN,OAAQ9I,EAAkDzE,EAAlDyE,YAAa4H,EAAqCrM,EAArCqM,MAAOmB,EAA8BxN,EAA9BwN,SAAUC,EAAoBzN,EAApByN,gBACxCC,EAAYjJ,EAAYP,IACxByJ,EAAY3N,EAAMiG,MAAMC,OAAOhD,GACrC3C,QAAQC,IAAI,kBAAmB6L,GAC/B9L,QAAQC,IAAI,uBAAwBiE,GAEpClE,QAAQC,IAAI,sBAAuBR,GACnCO,QAAQC,IAAI,uBAAwB+M,GACpChN,QAAQC,IAAI,2BAA4BiN,GAkCxC,IAAMG,EAAOL,EAAOlH,QAAO,SAAAjB,GAAK,OAAIA,EAAM2B,MAAM7C,MAAQyJ,KAElDE,EAAOxB,EAAMhG,QAAO,SAAAyG,GAAO,OAAIA,EAAQ5I,MAAQyJ,KACrDpN,QAAQC,IAAI,qBAAsBqN,GAElC,IAhCoBC,EAgCdC,EAAc1B,EAAMhG,QAAO,SAAAyG,GAAO,OAAIA,EAAQ5I,MAAQyJ,KAAW,GAEjEK,EAAUR,EAAW,wBAA0B,6BACrD,OAAIO,EAEI,yBAAK1K,UAAU,oBAEVrD,EAAMiO,iBACNR,GAAmB,yBAAKpK,UAAU,uBAAf,IAAsC,kBAAC,EAAD,CAAiBgJ,MAAOA,EAAO5H,YAAaA,EAAa0I,aAAcnN,EAAMmN,aAAcb,UAAWyB,EAAYzB,UAAWC,UAAWwB,EAAYxB,UAAWE,cAAezM,EAAMyM,cAAeD,cAAexM,EAAMwM,cAAeS,cAAe,SAAAlI,GAAC,OAAI/E,EAAMiO,iBAAiBlJ,IAAIsI,cAAe,SAAAtI,GAAC,OAAI/E,EAAMqN,cAActI,MAApW,KACnByI,GAAY,yBAAKnK,UAAU,4BACxB,kBAAC,EAAD,CAAUgC,SAAUrF,EAAMkO,kBAAmBxI,aAAc1F,EAAM2G,cAAelC,YAAaA,EAAae,aAAcxF,EAAMmO,WAAYzD,WAAY1K,EAAM0K,WAAYoB,QAASkC,KAErL,yBAAK3K,UAAU,gBACX,0BAAMA,UAAU,oBAAoBoB,GAAe,yBAAKN,IAAK4J,EAAY3J,SAAUf,UAAU,iBAAiBiB,IAAI,iBA7C9GwJ,EA8CYC,EAAYxB,UA7CpCmB,IAAcC,EACP,yBAAKtK,UAAU,WAClB,4BAAQC,QAAStD,EAAMkO,kBAAmB7K,UAAU,uBAAsB,uBAAGiC,MAAM,wBAGvF/E,QAAQC,IAAIsN,GACZvN,QAAQC,IAAIsN,EAAcd,QAAQU,IAC9BI,EAAcd,QAAQU,IAAc,EAC5B,4BAAQrK,UAAU,0BAA0BC,QAAS,SAAAyB,GAAC,OAAI/E,EAAMmN,aAAaQ,KAAY,uBAAGtK,UAAU,8BAAb,eAEzF,4BAAQA,UAAU,0BAA0BC,QAAS,SAAAyB,GAAC,OAAI/E,EAAMmN,aAAaQ,KAAY,uBAAGtK,UAAU,6BAAb,gBAsC7F,yBAAKA,UAAU,yBACX,yBAAKA,UAAU,yBAAyB0K,EAAYxJ,UACpD,yBAAKlB,UAAU,oBAAoB0K,EAAY5B,MAGnD,yBAAK9I,UAAU,wBACX,yBAAKA,UAAU,mBACX,yBAAKA,UAAU,uBAAf,UAA6CuK,EAAK/J,SAEtD,yBAAKR,UAAU,0BACX,yBAAKA,UAAU,iBACX,0BAAMA,UAAU,cAAa,4BAAQA,UAAU,mBAAmBC,QAAS,SAAAyB,GAAC,OAAI/E,EAAMiO,iBAAiBlJ,KAA1E,cAA7B,IAAgIgJ,EAAYxB,UAAU1I,SAE1J,yBAAKR,UAAU,iBACX,0BAAMA,UAAU,cAAa,4BAAQA,UAAU,mBAAmBC,QAAS,SAAAyB,GAAC,OAAI/E,EAAMiO,iBAAiBlJ,KAA1E,cAA7B,IAAgIgJ,EAAYzB,UAAUzI,YAMtK,yBAAKR,UAAU,wBACVuK,GAAQA,EAAKxL,KAAI,SAAAgM,GACd,OACI,yBAAK/K,UAAU,cAAcqF,IAAK0F,EAAIlK,KAClC,yBAAKb,UAAU,uBACX,yBAAKA,UAAU,aAAac,IAAKiK,EAAIhJ,MAAOd,IAAI,WAAW1D,MAAM,OAAOE,OAAO,UAC/E,yBAAKuC,UAAU,2BACX,yBAAKA,UAAU,qBAAqBH,GAAIkL,EAAIlK,MA5DxDgD,EA6DgCkH,EAAIlK,IA5DpDwJ,IAAcC,EAEV,kBAAC,IAAMpH,SAAP,KACI,yBAAKlD,UAAU,oBAAmB,uBAAGiC,MAAM,uBAAuBhC,QAAS,SAAAyB,GAAO/E,EAAM0G,WAAW3B,EAAGmC,MAAtG,IAAyH,uBAAG5B,MAAM,8BAA8BhC,QAAS,SAAAyB,GAAC,OAAI/E,EAAMqH,0BAG5L,GAwDgC,kBAAC,IAAD,CAAMrD,GAAE,gBAAWoK,EAAIlK,KAAOjB,MAAO,CAAEc,eAAgB,OAAQsK,MAAO,UAAtE,yBA/DxC,IAAwBnH,OAyEV0G,EAAK/J,QAAU,wDAMrB,4CCzFGyK,EAxBF,SAACtO,GAAW,IAGfgO,EAD0BhO,EAAzBuO,UACqB,qBAAuB,0BAC7CC,EAF0BxO,EAAdyO,WAEe,sBAAwB,2BACrD,OACI,yBAAKpL,UAAU,YACdrD,EAAMuO,WACH,yBAAKlL,UAAU,sBACf,kBAAC,EAAD,CAAO+H,WAAYpL,EAAMoL,WAAYG,aAAcvL,EAAMuL,aAAc5E,cAAe3G,EAAM2G,cAAemF,QAASkC,EAAS/B,UAAWjM,EAAMiM,aAEjJjM,EAAMyO,YACC,yBAAKpL,UAAU,uBACf,kBAAC,EAAD,CAAQ+H,WAAYpL,EAAMoL,WAAYG,aAAcvL,EAAM0O,aAAchE,WAAY1K,EAAM0K,WAAY/D,cAAe3G,EAAM2G,cAAemF,QAAS0C,EAAazC,WAAY/L,EAAM+L,cAG1L,yBAAK1I,UAAU,sBAAqB,yBAAKA,UAAU,aAAf,UACpC,yBAAKA,UAAU,sBAAqB,yBAAKA,UAAU,aAAf,SACpC,yBAAKA,UAAU,sBAAqB,yBAAKA,UAAU,aAAf,Y,yBCoEjCsL,EAvFE,SAAA3O,GACb,IAAI4O,EAAW,GACXC,EAAW,GACZpK,EAAyBzE,EAAzByE,YAAaqK,EAAY9O,EAAZ8O,SACjBrK,IACEoK,EAAWpK,EAAY6H,UACrBwC,EAASjL,SACR+K,EAAWE,EAASzI,QAAO,SAAA0I,GAAc,OAAOF,EAAS7B,QAAQ+B,EAAShI,MAAM7C,MAAQ,GAAK6K,EAAShI,MAAM7C,MAAQO,EAAYP,SAyBtI,IAKI8K,EAAaJ,EAASK,MAAK,SAACnP,EAAGoP,GACjC,OAAO,IAAI5G,KAAK4G,EAAE7G,WAAa,IAAIC,KAAKxI,EAAEuI,cAG1C,OAAmB,OAAhB5D,EAEK,6BAEA,6BACCmK,EAAS/K,OAAS,EAAImL,EAAW5M,KAAI,SAAA2M,GAClC,OAAO,yBAAK1L,UAAU,oBAAoBqF,IAAKqG,EAAS7K,KAC5D,yBAAKb,UAAU,kBACf,yBAAKc,IAAK4K,EAAShI,MAAM3C,SAAUnB,MAAO,CAACrC,MAAM,OAAQE,OAAO,OAAQuD,aAAa,IAAKC,IAAI,mBAE/F,kBAAC,IAAD,CAAMrB,MAAO,CAACc,eAAgB,OAAQ0E,SAAS,GAAIzB,WAAW,GAAKmI,WAAW,OAAQd,MAAM,SAAUrK,GAAE,mBAAc+K,EAAShI,MAAM7C,MAArI,IAA8I6K,EAAShI,MAAMxC,WAG5J,yBAAKlB,UAAU,oBACf,yBAAMA,UAAU,WAAWc,IAAK4K,EAAS3J,MAAQd,IAAI,WAAW1D,MAAM,OAAOE,OAAO,UAEpF,yBAAKuC,UAAU,oBAEf,yBAAKA,UAAU,cAAcH,GAAI6L,EAAS7K,KAhDtD,SAAiBW,EAAOiD,EAAUtE,GAC9B,GAAGqB,EAAM,CACN,IAAMkD,EAAOlD,EAAMX,IACnB,OAAG4D,EAASE,WAAU,SAAAC,GAAK,OAAIA,EAAM/D,MAAQ6D,MAAS,EAEhD,yBAAK1E,UAAU,qBACf,kBAAC,EAAD,CAASE,OAAQvD,EAAMkI,WAAY1E,OAAQA,EAAQC,QAAQ,8BAC3D,8BAAOqE,EAASjE,OAAhB,WAKC,yBAAKR,UAAU,qBACjB,kBAAC,EAAD,CAASE,OAAQvD,EAAMkI,WAAY1E,OAAQA,EAAQC,QAAQ,8BAC3D,8BAAOqE,EAASjE,OAAhB,YAmCCsE,CAAQnI,EAAMyE,YAAasK,EAAS3G,MAAO2G,EAAS7K,KACrD,yBAAKb,UAAU,2BAA2B0L,EAASnG,SAAS/E,OAA5D,aACA,kBAAC,IAAD,CAAMZ,MAAO,CAACc,eAAgB,OAAQsK,MAAM,SAAUrK,GAAE,gBAAW+K,EAAS7K,MAC5E,yBAAKb,UAAU,gBAAf,yBAOA,yBAAKA,UAAU,gBAEf,2BAAI0L,EAAStJ,SACb,4BAzCQV,EAyCKgK,EAAS1G,UAxCvB,IAAIC,KAAKvD,GAAGwD,mBADJ,IAACxD,KA4CJ,yBAAK1B,UAAU,2BAA0B,yBAAKA,UAAU,2BAAf,yBAC7C,+BAAI,kBAAC,IAAD,CAAMW,GAAG,SAASX,UAAU,gBAA5B,qBADyC,sCAMzC,4CCOD+L,EAzFG,SAAApP,GAEfO,QAAQC,IAAIR,GACZ,IAAIqP,EAAe,GAHK,IAuBlBC,EAAuBtP,EAAvBsP,MAAO7K,EAAgBzE,EAAhByE,YAGb,GAAc,KAAV6K,EAAc,CACf,IAAIC,EAAWD,EAAME,cAErBH,EADgBrP,EAAM8O,SAASzI,QAAO,SAAA0I,GAAc,OAAOA,EAASpJ,KAAK8J,KAAK,IAAID,cAAcE,SAASH,WAGzGF,EAAerP,EAAM8O,SAIxB,OAAIrK,GAAe4K,EAAaxL,OAAS,EAGnC,6BACG,2BAAOa,KAAK,OAAOC,YAAY,SAASG,SAAU,SAAAC,GAAO/E,EAAM2G,cAAc5B,IAAMH,KAAK,aAAavB,UAAU,6BAC/G,iDACA,yBAAKA,UAAU,kBACXgM,GAAgBA,EAAajN,KAAI,SAAAgD,GAC/B,OAAO,yBAAK/B,UAAU,YAAYqF,IAAKtD,EAAMlB,KAC1C,yBAAKb,UAAU,qBACZ,yBAAKA,UAAU,WAAWc,IAAKiB,EAAMA,MAAOd,IAAI,WAAW1D,MAAM,OAAOE,OAAO,UAG/E,yBAAKuC,UAAU,oBACZ,yBAAKA,UAAU,mBAAmBH,GAAIkC,EAAMlB,KACzC,yBAAKb,UAAU,oBACZ,yBAAKc,IAAKiB,EAAM2B,MAAM3C,SAAUnB,MAAO,CAAErC,MAAO,OAAQE,OAAQ,OAAQuD,aAAc,GAAI4C,YAAa,OAAS3C,IAAI,mBACpH,kBAAC,IAAD,CAAMN,GAAE,mBAAcoB,EAAM2B,MAAM7C,KAAOjB,MAAO,CAAEc,eAAgB,OAAQsK,MAAO,QAAS5F,SAAU,KAApG,IAA4GrD,EAAM2B,MAAMxC,UACxH,yBAAKlB,UAAU,oBAhD7C,SAAiBwB,EAAOiD,EAAUtE,GAC/B,GAAIqB,EAAO,CACR,IAAMkD,EAAOlD,EAAMX,IACnB,OAAI4D,EAASE,WAAU,SAAAC,GAAK,OAAIA,EAAM/D,MAAQ6D,MAAS,EAEjD,yBAAK1E,UAAU,sBACZ,kBAAC,EAAD,CAASE,OAAQvD,EAAMkI,WAAY1E,OAAQA,EAAQC,QAAQ,+BAC3D,8BAAOqE,EAASjE,OAAhB,WAIH,yBAAKR,UAAU,sBACZ,kBAAC,EAAD,CAASE,OAAQvD,EAAMkI,WAAY1E,OAAQA,EAAQC,QAAQ,+BAC3D,8BAAOqE,EAASjE,OAAhB,YAoCmBsE,CAAQnI,EAAMyE,YAAaW,EAAMgD,MAAOhD,EAAMlB,KAC/C,yBAAKb,UAAU,gCAAgC+B,EAAMwD,SAAS/E,OAA9D,cAEH,kBAAC,IAAD,CAAMG,GAAE,gBAAWoB,EAAMlB,KAAOjB,MAAO,CAAEc,eAAgB,OAAQsK,MAAO,UAAW,yBAAKhL,UAAU,gBAAf,iCAatGoB,GAAuC,IAAxB4K,EAAaxL,QAAgByL,EAEjD,6BACG,2BAAO5K,KAAK,OAAOC,YAAY,SAASG,SAAU,SAAAC,GAAO/E,EAAM2G,cAAc5B,IAAMH,KAAK,aAAavB,UAAU,YAC/G,iDACA,4DAKH,6BACG,iDACA,6D,2BCGGsM,EApFA,SAAC3P,GAwDd,GAAIA,EACF,OACE,kBAAC,IAAMuG,SAAP,KACE,kBAACqJ,EAAA,EAAD,CAAQC,GAAG,OAAOC,QAAQ,OAAOC,OAAO,MACtC,kBAAC,IAAD,CAAM/L,GAAG,QAAQX,UAAU,uBAAuBJ,MAAO,CAACc,eAAgB,OAAQsK,MAAO,UAAzF,YACA,kBAACuB,EAAA,EAAOI,OAAR,CAAeC,gBAAc,qBAC7B,kBAACL,EAAA,EAAOM,SAAR,CAAiBhN,GAAG,oBACjBlD,EAAMyE,YAAc,kBAAC0L,EAAA,EAAD,CAAK9M,UAAU,WAClC,kBAAC,IAAD,CAAMW,GAAG,SAASX,UAAU,YAA5B,SACA,kBAAC,IAAD,CAAMW,GAAG,WAAWX,UAAU,YAA9B,mBAhEkB+M,EAiEIpQ,EAAMoQ,eA9DrBvM,QACfuM,EAAcnB,MAAK,SAACnP,EAAEoP,GAC5B,OAAGpP,EAAEuI,UAAY6G,EAAE7G,UACV,EACAvI,EAAEuI,UAAY6G,EAAE7G,WACf,EAED,KAIN+H,EAAcvM,OAAS,EAEpB,kBAACwM,EAAA,EAAD,CAAajH,MAAM,gBAAgBlG,GAAG,sBACrCkN,GAAiBA,EAAchO,KAAI,SAAAkO,GAClC,GAA6B,SAA1BA,EAAiB5L,MAA6C,YAA1B4L,EAAiB5L,MACtD,GAAgC,OAA7B4L,EAAiBC,QAClB,OACE,kBAAC,IAAMhK,SAAP,CAAgBmC,IAAK4H,EAAiBpM,KACtC,kBAACmM,EAAA,EAAYG,KAAb,CAAkBC,KAAI,gBAAWH,EAAiBC,QAAQrM,KAAOjB,MAAO,CAACrC,MAAM,WAC/E,0BAAMyC,UAAU,0BAAyB,yBAAKc,IAAKmM,EAAiBI,QAAQtM,SAAUE,IAAI,iBAC1F,0BAAMjB,UAAU,oBAChB,0BAAMA,UAAU,cAAciN,EAAiBI,QAAQnM,UADvD,IACyE+L,EAAiBK,OAC3F,0BAAMtN,UAAU,mBAAkB,yBAAKc,IAAKmM,EAAiBC,QAAQnL,MAAOnC,MAAO,CAACrC,MAAM,OAAQE,OAAO,OAAQuD,aAAa,IAAKC,IAAI,sBAExI,kBAAC+L,EAAA,EAAYO,QAAb,YAGE,GAA6B,WAA1BN,EAAiB5L,KACxB,OACE,kBAAC,IAAM6B,SAAP,CAAgBmC,IAAK4H,EAAiBpM,KAEtC,kBAAC,IAAD,CAAMF,GAAE,mBAAcsM,EAAiBI,QAAQxM,KAAOjB,MAAO,CAAEc,eAAgB,OAAQsK,MAAO,SAAWhL,UAAU,iBACnH,0BAAMA,UAAU,0BAAyB,yBAAKc,IAAKmM,EAAiBI,QAAQtM,SAAUE,IAAI,iBAC1F,0BAAMjB,UAAU,oBACd,0BAAMA,UAAU,cAAciN,EAAiBI,QAAQnM,UADzD,IAC2E+L,EAAiBK,QAG9F,kBAACN,EAAA,EAAYO,QAAb,gBA3BV,GAqCc,kBAACP,EAAA,EAAD,CAAajH,MAAM,gBAAgBlG,GAAG,uBAetC,kBAAC,IAAD,CAAMc,GAAE,mBAAchE,EAAMyE,YAAYP,KAAOb,UAAU,YAAW,uBAAGA,UAAU,cAAcJ,MAAO,CAAEgE,YAAa,KAArH,WACA,kBAACoJ,EAAA,EAAD,CAAajH,MAAO,uBAAG/F,UAAU,eAAmBH,GAAG,qBAAqBG,UAAU,eACpF,kBAACgN,EAAA,EAAYG,KAAb,CAAkBlN,QAAStD,EAAM6Q,SAAU5N,MAAO,CAAEoL,MAAO,QAA3D,YAGF,kBAAC8B,EAAA,EAAD,CAAK9M,UAAU,WACb,kBAAC8M,EAAA,EAAIK,KAAL,CAAUM,GAAG,SAASxN,QAAS,SAAAyB,GAAC,OAAI/E,EAAM+Q,gBAAgBhM,IAAI1B,UAAU,sBAAxE,SACA,kBAAC8M,EAAA,EAAIK,KAAL,CAAUM,GAAG,SAASxN,QAAS,SAAAyB,GAAC,OAAI/E,EAAMgR,iBAAiBjM,IAAK1B,UAAU,sBAA1E,cAzEd,IAA8B+M,GCJ1Ba,EAAUC,IAAMC,OAAO,CACzBC,QAAQ,0CAINC,EAAe,SAAAC,GAEjB,MAAMA,GAGO,GACbL,UAEAM,aAHa,SAGCC,GAEZ,OAAOP,EAAQQ,KAAK,UAAWD,GAC5BtR,MAAK,SAAAwR,GAAG,OAAIA,EAAIC,QAChBC,MAAMP,IAGXQ,aAVa,SAUCC,GAEZ,OAAOb,EAAQQ,KAAK,iBAAkBK,GACnC5R,MAAK,SAAAwR,GAAG,OAAIA,EAAIC,QAChBC,MAAMP,KC6mBAU,E,2MApnBXrI,MAAQ,CACN2C,MAAO,GACP5H,YAAa,KACbF,SAAU,GACVqH,MAAO,GACPC,SAAU,GACVzH,SAAU,GACV+H,IAAK,GACL6F,UAAW,GACXvM,QAAS,GACTE,KAAM,GACNgE,UAAW,GACXnF,QAAS,GACT4L,cAAe,GACfvH,aAAa,EACb9I,IAAK,mCACLkS,WAAY,mCAEZC,OAAQ,oCAERC,QAAS,SACT5E,OAAQ,GACR6E,kBAAmB,qFACnBC,aAAc,KACdhH,UAAU,EACVC,QAAS,GACTgH,WAAY,KACZ9E,UAAU,EACViB,YAAY,EACZF,WAAW,EACXgE,WAAY,GACZ9E,iBAAiB,EACjBhB,eAAe,EACfD,eAAe,G,EAuBnBgG,mBAAqB,SAAAzN,GACnB,IAAM0N,EAAW,IAAIC,SACrBD,EAASE,OAAO,WAAY5N,EAAE5D,OAAOkJ,MAAM,IAC1B,MAAboI,GACF,EAAK7H,SAAS,CACZyH,aAAcI,K,EAOpBG,W,uCAAa,WAAM7N,GAAN,eAAAjF,EAAA,yDACXiF,EAAEwC,iBAEH,EAAKmC,MAAMC,YAAc,GAHb,uBAITkJ,EAAa,IAAIH,SAJR,SAKTG,EAAWF,OAAO,WAAY,EAAKjJ,MAAMC,WALhC,OAMdsH,EAAQM,aAAasB,GACrB3S,MAAK,SAAA4S,GACFvS,QAAQC,IAAI,gBAAiBsS,GAE7B,EAAKlI,SAAS,CAACoH,UAAWc,EAAS1O,WAAY,WAElD8M,IAAMO,KAAN,UAAc,EAAK/H,MAAMwI,OAAzB,kBAAiD,EAAKxI,MAAO,CAACqJ,iBAAiB,IAC9E7S,MAAK,SAAA8S,GACFzS,QAAQC,IAAI,aACZD,QAAQC,IAAIwS,EAAWrB,MACvB,IAAMsB,EAAUD,EAAWrB,KACrBuB,EAAK,YAAO,EAAKxJ,MAAM6D,QAC7B2F,EAAMC,KAAKF,GACX,EAAKrI,SAAS,CAACS,UAAU,EAC1B5F,QAAS,GACT8H,OAAQ2F,EACRlB,UAAW,GACXrM,KAAM,GACNgE,UAAW,KAGVwB,WACE,EAAKP,SAAS,CAACS,UAAU,IAAS,QAEvCuG,OAAM,SAAAN,GAAG,OAAI/Q,QAAQC,IAAI8Q,YAItBM,OAAM,SAAAN,GACL/Q,QAAQC,IAAI,mCAAoC8Q,GAChD/Q,QAAQC,IAAI8Q,MApCH,2C,wDA2Cb8B,kB,sBAAoB,sBAAAtT,EAAA,+EAGVoR,IAAMmC,IAAN,UAAa,EAAK3J,MAAMwI,OAAxB,mBAAgDhS,MAAK,SAAA4S,GAEzD,EAAKlI,SAAS,CACZ2C,OAAQuF,EAASnB,UANL,sDAUhBpR,QAAQC,IAAR,MAVgB,OAYlB0Q,IAAMmC,IAAN,UAAa,EAAK3J,MAAMwI,OAAxB,WAAwChS,MAAK,SAAA4S,GAE3C,EAAKlI,SAAS,CAACyB,MAAOyG,EAASnB,UAdf,wD,EAoBtB2B,kB,uCAAoB,WAAOnM,GAAP,SAAArH,EAAA,+EAEVoR,IAAMmC,IAAN,UAAa,EAAK3J,MAAMwI,OAAxB,6BAAmD/K,IAAUjH,MAAK,SAAA4S,GACtE,IAAMS,EAAmBT,EAASnB,KAClC,EAAK/G,SAAS,CACZwF,cAAemD,OAEhB3B,OAAM,SAAAN,GAAG,OAAI/Q,QAAQC,IAAI8Q,MAPZ,sDAUhB/Q,QAAQC,IAAR,MAVgB,wD,wDAelBgT,WAAa,SAACzO,GACZxE,QAAQC,IAAIuE,GACZ,EAAK6F,SAAL,eACG7F,EAAE0O,cAAc7O,KAAOG,EAAE0O,cAAc5O,S,EAM5C6O,aAAe,SAAC3O,GAClB,EAAK6F,SAAS,CAACxG,SAAUW,K,EAIvB2F,WAAa,SAAC3F,GACZxE,QAAQC,IAAIuE,GACTA,EAAEuF,MAAQ,SACb,EAAKM,SAAS,CAACjB,UAAW5E,EAC1BuG,QAAS,KAET,EAAKV,SAAS,CAACU,QAAS,2B,EAO1BqI,YAAc,SAAC5O,GAEb,GADAA,EAAEwC,iBACiC,IAAhC,EAAKmC,MAAMC,UAAU9F,OAAa,CAE1B,IAAMgP,EAAa,IAAIH,SACvBG,EAAWF,OAAO,WAAY,EAAKjJ,MAAMC,WAEzCsH,EAAQM,aAAasB,GACpB3S,MAAK,SAAA4S,GACFvS,QAAQC,IAAI,gBAAiBsS,GAE7B,EAAKlI,SAAS,CAAEoH,UAAWc,EAAS1O,WAAY,WAE/C8M,IAAMO,KAAN,UAAc,EAAK/H,MAAMwI,OAAzB,gBAA+C,EAAKxI,MAAO,CAACqJ,iBAAiB,IAC5E7S,MAAK,SAAA0T,GACFrT,QAAQC,IAAI,aACZD,QAAQC,IAAIoT,GACZ,EAAKhJ,SAAS,CAACiJ,UAAU,EACvBtP,SAAU,GACRqH,MAAO,GACPC,SAAU,GACVzH,SAAU,GACVuF,UAAW,GACXmK,gBAAgB,EAChBC,eAAe,OAGtBnC,OAAM,SAAAN,GAAG,OAAI/Q,QAAQC,IAAI8Q,YAG9BM,OAAM,SAAAN,GACR/Q,QAAQC,IAAI,mCAAoC8Q,WAK3CJ,IAAMO,KAAN,UAAc,EAAK/H,MAAMwI,OAAzB,gBAA+C,EAAKxI,MAAO,CAACqJ,iBAAiB,IAC5E7S,MAAK,SAAA0T,GACFrT,QAAQC,IAAI,aACZD,QAAQC,IAAIoT,GACZ,EAAKhJ,SAAS,CAACiJ,UAAU,EACxBtP,SAAU,GACRqH,MAAO,GACPC,SAAU,GACVzH,SAAU,GACVuF,UAAW,QAGjBiI,OAAM,SAAAN,GAAG,OAAI/Q,QAAQC,IAAI8Q,O,EAc7C0C,UAAY,SAACjP,GACbA,EAAEwC,iBACF2J,IAAMO,KAAN,UAAc,EAAK/H,MAAMwI,OAAzB,eAA8C,EAAKxI,MAAO,CAACqJ,iBAAiB,IAC3E7S,MAAK,SAAA+T,GACF1T,QAAQC,IAAIyT,EAAmBtC,KAAKuC,SADZ,IAEhBA,EAAYD,EAAmBtC,KAA/BuC,QACR,EAAKC,gBAAgBD,GACrB,EAAKtJ,SAAS,CACZrG,SAAU,GACVsH,SAAU,KAGZuI,MAAM,2BACSC,IAAZH,GACD/I,YAAW,WAAO,EAAKmI,kBAAkBY,EAAQhQ,OAAQ,QAK9D0N,OAAM,SAAAN,GACH/Q,QAAQC,IAAI8Q,O,EAOhBgD,WAAa,WACbpD,IAAMqD,OAAN,UAAgB,EAAK7K,MAAMwI,OAA3B,gBAAiD,CAACa,iBAAiB,IAClE7S,MAAK,SAAA4M,GACJvM,QAAQC,IAAI,iBACZD,QAAQC,IAAIsM,GACZ,EAAKqH,gBAAgB,MACrB,EAAKvJ,SAAS,CAACnG,YAAa,UAE9BjC,OAAOgS,SAAP,K,EAIAtM,WAAa,SAACnD,GACZmM,IAAMO,KAAN,UAAc,EAAK/H,MAAMwI,OAAzB,wBAA+CnN,GAAK,EAAK2E,MAAMjF,YAAa,CAACsO,iBAAiB,IAC7F7S,MAAK,SAAAuU,GAGJ,IAAMxB,EAAUwB,EAAiB9C,KAC3BuB,EAAK,YAAO,EAAKxJ,MAAM6D,QACvBmH,EAAWxB,EAAMlL,WAAU,SAAA2M,GAAU,OAAIA,EAAWzQ,MAAQ+O,EAAQ/O,OAC3E3D,QAAQC,IAAI0S,EAAMwB,IACjBxB,EAAMwB,GAAUtM,MAAQ6K,EAAQ7K,MACpC,EAAKwC,SAAS,CAAC2C,OAAQ2F,IAAQ,kBAI5BtB,OAAM,SAAAN,GAAG,OAAI/Q,QAAQC,IAAI8Q,O,EAK5BsD,aAAe,SAAC1N,GAChB3G,QAAQC,IAAI0G,GACZ,IAAM2N,EAAS,YAAO,EAAKnL,MAAM6D,QAC3BmH,EAAWG,EAAU7M,WAAU,SAAA2M,GAAU,OAAIA,EAAWzQ,MAAQgD,KACtE3G,QAAQC,IAAIkU,GACXG,EAAUC,OAAOJ,EAAU,GAC3B,EAAK9J,SAAS,CACZ2C,OAAQsH,EACRhM,aAAa,IAEfqI,IAAMO,KAAN,UAAc,EAAK/H,MAAMwI,OAAzB,mBAA0ChL,GAAa,CAAC6L,iBAAiB,IACxE7S,MAAK,SAAA6U,GAAmB,OACvBvS,OAAOgS,SAAW,WAEnB5C,OAAM,SAAAN,GAAG,OAAI/Q,QAAQC,IAAI8Q,O,EAI3BjK,cAAgB,SAAAtC,GACd,EAAK6F,SAAS,CACZ/B,aAAa,K,EAGjBW,aAAe,SAAAzE,GACb,EAAK6F,SAAS,CACZ/B,aAAa,K,EAKjBmM,SAAW,SAACjQ,EAAGkQ,GACb1U,QAAQC,IAAIyU,GAEZ,IAAMC,EAAQ,YAAO,EAAKxL,MAAM6D,QAC1BmH,EAAWQ,EAASlN,WAAU,SAAA7B,GAAO,OAAIA,EAAQjC,MAAQ+Q,KAC/CC,EAASR,GACflO,OAAS0O,EAASR,GAAUlO,MACvC,EAAKoE,SAAS,CACZ2C,OAAQ2H,K,EAIXtO,WAAa,SAAC7B,EAAGoB,GACfpB,EAAEwC,iBADyB,MAEH,EAAKmC,MAAvBjE,EAFqB,EAErBA,QAASE,EAFY,EAEZA,KAEK,IAAhBA,EAAK9B,SACP8B,EAAOA,EAAKwP,MAAM,cAGpB,IAAMC,EAAS,YAAO,EAAK1L,MAAM6D,QAC3BmH,EAAWU,EAAUpI,QAAQ7G,GAC/BkP,EAAe,GACfC,EAAW,GAEXC,EAAa,GACjBD,EAAW3P,EAEiB,KAD5B0P,EAAe5P,GACE5B,SACfwR,EAAeD,EAAUV,GAAUjP,SACX,IAApB6P,EAASzR,OACbyR,EAAWF,EAAUV,GAAU/O,MAG/B4P,EADYD,EACWjP,QAAO,SAAAmC,GAAa,MAAmB,KAAZA,KAElD4M,EAAUV,GAAUjP,QAAU4P,EAC9BD,EAAUV,GAAU/O,KAAO4P,EAC3BH,EAAUV,GAAUlO,OAAS4O,EAAUV,GAAUlO,MAEjD,EAAKoE,SAAS,CAAE2C,OAAQ6H,IAAa,kBACnClE,IAAMsE,IAAN,UAAa,EAAK9L,MAAM+L,SAAxB,uBAA+CtP,EAAQjC,KAAO,CAAEuB,QAAS4P,EAAc1P,KAAM2P,IAC1FpV,MAAK,SAAAwV,GACJ,EAAK9K,SAAS,CACZnF,QAAS,GACTE,KAAM,QAKPiM,OAAM,SAAAN,GAAG,OAAI/Q,QAAQC,IAAI,kD,EAOpCmV,aAAe,WACb,EAAK/K,SAAS,CACZ4C,UAAW,EAAK9D,MAAM8D,WACrB,WACDjN,QAAQC,IAAI,EAAKkJ,MAAM8D,c,EAI3BW,WAAa,SAACpJ,EAAG+H,GACf/H,EAAEwC,iBADyB,MAEY,EAAKmC,MAApCyC,EAFmB,EAEnBA,IAAKxC,EAFc,EAEdA,UAAWlF,EAFG,EAEHA,YAGxB,GAFAlE,QAAQC,IAAI,EAAKkJ,MAAMyC,KACvB5L,QAAQC,IAAI,EAAKkJ,MAAMC,WACY,IAAhC,EAAKD,MAAMC,UAAU9F,OAAa,CAEnC,IAAMgP,EAAa,IAAIH,SACvBG,EAAWF,OAAO,WAAY,EAAKjJ,MAAMC,WACzCsH,EAAQM,aAAasB,GACpB3S,MAAK,SAAA4S,GACFvS,QAAQC,IAAI,gBAAiBsS,GAE7B,EAAKlI,SAAS,CAAEoH,UAAWc,EAAS1O,WAAY,WAE/C8M,IAAMsE,IAAN,UAAa,EAAK9L,MAAMwI,OAAxB,4BAAkDzN,EAAYP,KAAO,CAAEiI,MAAKxC,UAAW,EAAKD,MAAMsI,UAAWvN,eAAc,CAACsO,iBAAiB,IAC5I7S,MAAK,SAAA0T,GACFrT,QAAQC,IAAI,oBACZD,QAAQC,IAAIoT,EAAQjC,MACpB,IAAMiE,EAAS,YAAO,EAAKlM,MAAM2C,OAHpB,EAIWuH,EAAQjC,KAAzBxF,EAJM,EAINA,IAAK/H,EAJC,EAIDA,SACNsQ,EAAWkB,EAAU5N,WAAU,SAAA8E,GAAO,OAAIA,EAAQ5I,MAAQO,EAAYP,OAC5E0R,EAAUlB,GAAUvI,IAAMA,EAC1ByJ,EAAUlB,GAAUtQ,SAAWA,EAC/B,EAAKwG,SAAS,CACbyB,MAAOuJ,EACLxR,SAAU,GACVuF,UAAW,GACX6D,UAAW,EAAK9D,MAAM8D,WAE7BhL,OAAOgS,SAAP,mBAA8B/P,EAAYP,QACvC0N,OAAM,SAAAN,GAAG,OAAI/Q,QAAQC,IAAI8Q,YAGhCM,OAAM,SAAAN,GACR/Q,QAAQC,IAAI,mCAAoC8Q,WAG7CJ,IAAMsE,IAAN,UAAa,EAAK9L,MAAMwI,OAAxB,4BAAkDzN,EAAYP,KAAO,CAAEiI,MAAKxC,YAAWlF,eAAc,CAACsO,iBAAiB,IACtH7S,MAAK,SAAA0T,GACFrT,QAAQC,IAAI,oBACZD,QAAQC,IAAIoT,EAAQjC,MACpB,IAAMiE,EAAS,YAAO,EAAKlM,MAAM2C,OAC1BF,EAAOyH,EAAQjC,KAAfxF,IACDuI,EAAWkB,EAAU5N,WAAU,SAAA8E,GAAO,OAAIA,EAAQ5I,MAAQO,EAAYP,OAC5E0R,EAAUlB,GAAUvI,IAAMA,EAE1B,EAAKvB,SAAS,CACZyB,MAAOuJ,EACLxR,SAAU,GACVuF,UAAW,GACX6D,UAAW,EAAK9D,MAAM8D,WAE7BhL,OAAOgS,SAASqB,YAEhBjE,OAAM,SAAAN,GAAG,OAAI/Q,QAAQC,IAAI8Q,O,EAKhCnE,aAAe,SAAA2I,GACfvV,QAAQC,IAAIsV,GADmB,IAEvBrR,EAAgB,EAAKiF,MAArBjF,YACRyM,IAAMO,KAAN,UAAc,EAAK/H,MAAMwI,OAAzB,mBAA0C4D,GAAgBrR,GACzDvE,MAAK,SAAA6U,GACJxU,QAAQC,IAAIuU,EAAoBpD,MAChCpR,QAAQC,IAAIiE,EAAYP,KACxB,IAAM2K,EAAQ,YAAO,EAAKnF,MAAM2C,OAC1Ba,EAAS,EAAKxD,MAAMjF,YACpB4H,EAAQ0I,EAAoBpD,KAC5BoE,EAAQ1J,EAAMA,EAAMrE,WAAU,SAAA8E,GAAO,OAAIA,EAAQ5I,MAAQO,EAAYP,QACrE8R,EAAQ3J,EAAMA,EAAMrE,WAAU,SAAA8E,GAAO,OAAIA,EAAQ5I,MAAQ4R,MACjEvV,QAAQC,IAAIuV,GACZxV,QAAQC,IAAIwV,GACV,IAAMC,EAAYpH,EAAS7G,WAAU,SAAAkO,GAAU,OAAIA,EAAWhS,MAAQ6R,EAAM7R,OAC5E3D,QAAQC,IAAIyV,GACZ,IAAME,EAAYtH,EAAS7G,WAAU,SAAAkO,GAAU,OAAIA,EAAWhS,MAAQ8R,EAAM9R,OAC5E3D,QAAQC,IAAI2V,GACZjJ,EAAOX,UAAYwJ,EAAMxJ,UACzBW,EAAOZ,UAAYyJ,EAAMzJ,UACzBuC,EAASoH,GAAW1J,UAAYwJ,EAAMxJ,UACtCsC,EAASoH,GAAW3J,UAAYyJ,EAAMzJ,UACtCuC,EAASsH,GAAW5J,UAAYyJ,EAAMzJ,UACtCsC,EAASsH,GAAW7J,UAAY0J,EAAM1J,UACtC/L,QAAQC,IAAI,iBACZD,QAAQC,IAAIqO,GACZ,EAAKjE,SAAS,CAACyB,MAAOwC,EACtBpK,YAAayI,Q,EAKfjI,cAAgB,SAACF,EAAGvB,GAClBuB,EAAEwC,iBACFhH,QAAQC,IAAI,EAAKkJ,MAAMlF,SACvBjE,QAAQC,IAAIgD,GACZ,IAAM4S,EAAa,CACjBrP,MAAO,EAAK2C,MAAMjF,YAClB6G,QAAS,EAAK5B,MAAMlF,SAEhB0O,EAAK,YAAO,EAAKxJ,MAAM6D,QAC7BhN,QAAQC,IAAI0S,EAAMlL,WAAU,SAAA7B,GAAO,OAAIA,EAAQjC,MAAQV,MACvD,IAAMkR,EAAWxB,EAAMlL,WAAU,SAAA7B,GAAO,OAAIA,EAAQjC,MAAQV,KAC3DkR,GAAY,GACbxB,EAAMwB,GAAU9L,SAASuK,KAAK,CAAClP,KAAM,CACnCC,IAAK,EAAKwF,MAAMjF,YAAYP,IAC5BK,SAAU,EAAKmF,MAAMjF,YAAYF,SACjCH,SAAU,EAAKsF,MAAMjF,YAAYL,UAChCI,QAAS,EAAKkF,MAAMlF,UAEzB,EAAKoG,SAAS,CACZ2C,OAAQ2F,EACR1O,QAAS,KAET0M,IAAMsE,IAAN,UAAa,EAAK9L,MAAMwI,OAAxB,uBAA6C1O,GAAU4S,GACtDlW,MAAK,SAAA6U,GAAmB,OAAIxU,QAAQC,IAAIuU,MACxCnD,OAAM,SAAAN,GAAG,OAAI/Q,QAAQC,IAAI8Q,O,EAK5B+E,WAAa,SAACtR,GACZA,EAAEwC,iBACFhH,QAAQC,IAAIuE,EAAE0O,cAAc6C,WAEX,eADDvR,EAAE0O,cAAc6C,UAE9B,EAAK1L,SAAS,CACZ6C,iBAAkB,EAAK/D,MAAM+D,gBAC7BhB,eAAe,EACfD,eAAe,IAGjB,EAAK5B,SAAS,CACZ6C,iBAAkB,EAAK/D,MAAM+D,gBAC7BhB,eAAe,EACfD,eAAe,K,EAMrBuH,cAAgB,SAAChP,GACfA,EAAEwC,iBACF,EAAKqD,SAAS,CACZ2D,WAAY,EAAK7E,MAAM6E,a,EAK3BuF,eAAiB,SAAC/O,GAChBA,EAAEwC,iBACF,EAAKqD,SAAS,CACZ6D,YAAa,EAAK/E,MAAM+E,c,EAK5BxC,UAAY,SAAClH,GACXA,EAAEwC,iBACF,EAAKqD,SAAS,CACZ2D,WAAW,K,EAKfxC,WAAa,SAAChH,GACZA,EAAEwC,iBACF,EAAKqD,SAAS,CACZ6D,YAAY,K,EAKhBpB,cAAgB,SAACtI,EAAGkQ,GAClBlQ,EAAEwC,iBAGe,cAFDxC,EAAE5D,OAAOmV,UAGvB,EAAK1L,SAAS,CACZ6B,eAAe,EACfD,eAAe,KAGjBjM,QAAQC,IAAI,cACZ,EAAKoK,SAAS,CACZ6B,eAAe,EACfD,eAAe,M,EAKrB+J,eAAiB,SAACC,GAEhB,EAAK5L,SAAS,CACZ2H,WAAYiE,K,wNAjiBNvW,KAAKmT,oB,OACXlC,IAAMmC,IAAN,UAAapT,KAAKyJ,MAAMwI,OAAxB,kBAAgD,CAACa,iBAAiB,IACjE7S,MAAK,SAAA6U,GAAwB,IACpBb,EAAYa,EAAoBpD,KAAhCuC,QACR3T,QAAQC,IAAI0T,QACGG,IAAZH,GACD/I,YAAW,WAAO,EAAKmI,kBAAkBY,EAAQhQ,OAAQ,KAE3D,EAAKiQ,gBAAgBD,MAEtBtC,OAAM,SAAAN,GAAG,OAAI/Q,QAAQC,IAAI,wDAAyD8Q,M,4IAIrErN,GACdhE,KAAK2K,SAAS,CAAEnG,YAAaR,M,+BAshBrB,IAAD,OAIP,OACE,yBAAKZ,UAAU,OAEb,kBAAC,EAAD,CAAQoB,YAAaxE,KAAKyJ,MAAMjF,YAAa2L,cAAenQ,KAAKyJ,MAAM0G,cAAeW,gBAAiB9Q,KAAK8T,cAAe/C,iBAAkB/Q,KAAK6T,eAAgBQ,WAAYrU,KAAKqU,WAAYnC,QAASlS,KAAKyJ,MAAMyI,QAAWtB,SAAU5Q,KAAKqU,WAAYmC,UAAWjU,OAAOgS,WAC3Q,kBAAC,IAAD,KACA,kBAAC,IAAD,CAAOkC,OAAK,EAACC,KAAK,IAAI3T,OAAQ,SAAChD,GAAD,OAAY,EAAK0J,MAAMjF,YAAqZ,kBAAC,IAAD,CAAUT,GAAG,UAApZ,kBAAC,EAAD,iBAAUhE,EAAV,CAAiByO,WAAY,EAAK/E,MAAM+E,WAAYF,UAAW,EAAK7E,MAAM6E,UAAWtC,UAAW,EAAKA,UAAWF,WAAY,EAAKA,WAAYpF,cAAe,EAAK6M,WAAY9I,WAAY,EAAKA,WAAYa,aAAc,EAAKyI,UAAWtF,aAAc,EAAKiF,YAAaiD,aAAiB,SAAA1C,GAAO,OAAI,EAAKC,gBAAgBD,IAAUzP,YAAe,EAAKiF,MAAMjF,YAAa2G,WAAY,EAAK1B,YAC9b,kBAAC,IAAD,CAAOiN,KAAK,SAAS3T,OAAQ,SAAChD,GAAD,OAAY,kBAAC,EAAD,iBAAeA,EAAf,CAAsB8O,SAAU,EAAKpF,MAAM6D,OAAQsJ,YAAa,EAAKC,YAAa5O,WAAY,EAAKA,WAAYzD,YAAa,EAAKiF,MAAMjF,YAAa6K,MAAO,EAAK5F,MAAM6I,WAAY5L,cAAe,EAAK6M,iBAC/O,kBAAC,IAAD,CAAOkD,OAAK,EAACC,KAAK,QAAQ3T,OAAQ,SAAChD,GAAD,OAAY,kBAAC,EAAD,iBAAcA,EAAd,CAAqB8O,SAAU,EAAKpF,MAAM6D,OAAQ9I,YAAa,EAAKiF,MAAMjF,YAAayD,WAAY,EAAKA,iBACtJ,kBAAC,IAAD,CAAOwO,OAAK,EAACC,KAAK,WAAW3T,OAAQ,SAAChD,GAAD,OAAW,kBAAC,EAAD,iBAAcA,EAAd,CAAqBuL,aAAc,EAAKqH,WAAYlI,WAAY,EAAKA,WAAYC,UAAW,EAAK+I,aAAc/M,cAAe,EAAK6M,WAAYpI,WAAY,EAAK1B,YAChN,kBAAC,IAAD,CAAOgN,OAAK,EAACC,KAAK,YAAY3T,OAAQ,SAAChD,GAAD,OAAW,kBAAC,EAAD,iBAAgBA,EAAhB,CAAuBoG,WAAY,EAAKsD,MAAM6D,OAAQjE,SAAU,EAAKsL,aAAcpL,aAAc,EAAKA,aAAcnC,cAAe,EAAKA,cAAewB,YAAa,EAAKa,MAAMb,YAAaX,WAAY,EAAKA,WAAYxB,WAAY,EAAKsO,SAAUpO,WAAY,EAAKA,WAAYnC,YAAa,EAAKiF,MAAMjF,YAAakC,cAAe,EAAK6M,WAAYhP,QAAS,EAAKkF,MAAMlF,QAASS,cAAe,EAAKA,cAAe0D,YAAa,EAAK4N,qBACzd,kBAAC,IAAD,CAAOG,OAAK,EAACC,KAAK,eAAe3T,OAAQ,SAAChD,GAAD,OACvC,EAAK0J,MAAMjF,YACV,kBAAC,EAAD,iBAAiBzE,EAAjB,CACCuN,OAAU,EAAK7D,MAAM6D,OACrB9I,YAAe,EAAKiF,MAAMjF,YAC1B4H,MAAO,EAAK3C,MAAM2C,MAClBmB,SAAU,EAAK9D,MAAM8D,SACrBL,aAAc,EAAKA,aACnBxG,cAAe,EAAK6M,WACpBtF,kBAAmB,EAAKyH,aACxBjL,WAAY,EAAKA,WACjByD,WAAY,EAAKA,WACjBF,iBAAoB,EAAKoI,WACzB5I,gBAAmB,EAAK/D,MAAM+D,gBAC9BJ,cAAiB,EAAKA,cACtBb,cAAiB,EAAK9C,MAAM8C,cAC5BC,cAAiB,EAAK/C,MAAM+C,iBAE7B,kBAAC,IAAD,CAAUzI,GAAG,oB,GA3mBNb,aCNE4T,QACW,cAA7BvU,OAAOgS,SAASwC,UAEe,UAA7BxU,OAAOgS,SAASwC,UAEhBxU,OAAOgS,SAASwC,SAAS/Q,MACvB,2DCXNgR,IAASjU,OACL,kBAAC,IAAD,KACA,kBAAC,EAAD,OACkBtC,SAASC,eAAe,SDuHxC,kBAAmBuW,WACrBA,UAAUC,cAAcC,MAAMlX,MAAK,SAAAmX,GACjCA,EAAaC,iB","file":"static/js/main.23f3ee50.chunk.js","sourcesContent":["import \"../App.css\";\r\nimport React, { Component } from \"react\";\r\nimport * as THREE from \"three\";\r\nimport Orbitcontrols from \"three-orbitcontrols\";\r\n\r\n\r\nclass ThreeMap extends Component {\r\n  // state = {\r\n  //   picture: \"\"\r\n  // };\r\n\r\n  async componentDidMount() {\r\n\tawait this.getData()\r\n\t.then(()=>{\r\n       this.initThree()\r\n\t})\r\n  }\r\n\r\n  // GETS DATA FROM STATE\r\n  getData = async () => {\r\n    const {url} = this.props\r\n    if(url){\r\n    // await axios.get(\"http://localhost:5000/api/upload\").then(response => {\r\n    //   this.setState({\r\n    //     picture: response.data\r\n    //   });\r\n    //  });\r\n    }\r\n    return url\r\n  };\r\n  \r\n\r\n\r\n\r\n\r\n  initThree() {\r\n    const {url} = this.props\r\n    console.log(\"MY URL\");\r\n    console.log(url);\r\n   // let stats;\r\n    let camera, scene, renderer;\r\n   // let group;\r\n    let container = document.getElementById(\"WebGL-output\");\r\n    let width = container.clientWidth,\r\n      height = container.clientHeight;\r\n\r\n   \r\n    init();\r\n    \r\n\r\n    animate();\r\n\r\n    function init() {\r\n      scene = new THREE.Scene();\r\n      // group = new THREE.Group();\r\n      // scene.add( group );\r\n\r\n      camera = new THREE.PerspectiveCamera(75, width / height, 1, 1000);\r\n      // camera.position.x = -10;\r\n      // camera.position.y = 15;\r\n      camera.position.z = 1;\r\n      camera.target = new THREE.Vector3(0, 0, 0);\r\n      // camera.lookAt( scene.position );\r\n\r\n      //TO CONTROL THE IMAGE MOVEMENT\r\n      let orbitControls = new /*THREE.OrbitControls*/ Orbitcontrols(camera, container);\r\n      orbitControls.autoRotate = false;\r\n      orbitControls.enableZoom = false;\r\n      // let clock = new THREE.Clock();\r\n      //THE AMBIENT LIGHT\r\n      let ambi = new THREE.AmbientLight(0x686868);\r\n      scene.add(ambi);\r\n\r\n      let spotLight = new THREE.DirectionalLight(0xffffff);\r\n      spotLight.position.set(550, 100, 550);\r\n      spotLight.intensity = 0.6;\r\n\r\n      scene.add(spotLight);\r\n      // Texture\r\n      let loader = new THREE.TextureLoader();\r\n      \r\n   \r\n      loader.load(url, function(texture) {\r\n        // let geometry = new THREE.SphereGeometry( 200, 20, 20 );\r\n        //100, 32, 32\r\n        let geometry = new THREE.SphereGeometry(500, 60, Math.pi * 2);\r\n        geometry.scale(-1, 1, 1);\r\n        let material = new THREE.MeshBasicMaterial({ map: texture });\r\n        let mesh = new THREE.Mesh(geometry, material);\r\n        scene.add(mesh);\r\n      });\r\n    \r\n      renderer = new THREE.WebGLRenderer();\r\n      renderer.setClearColor(0xffffff);\r\n      renderer.setPixelRatio(window.devicePixelRatio);\r\n      renderer.setSize(width, height);\r\n      container.appendChild(renderer.domElement);\r\n      // stats = new Stats();\r\n      // container.appendChild( stats.dom );  //Increase status information\r\n    }\r\n\r\n    function animate() {\r\n      requestAnimationFrame(animate);\r\n      render();\r\n      // stats.update();\r\n    }\r\n    function render() {\r\n      renderer.render(scene, camera); \r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n    \r\n    <div>  \r\n\r\n      {/* <h4>\r\n      <Link href=\"/details\">Details</Link>\r\n      </h4> */}\r\n\r\n        <div\r\n          style={{\r\n            height: this.props.height,\r\n            width: this.props.width,\r\n          }}\r\n          id=\"WebGL-output\"\r\n         \r\n        />\r\n         \r\n        \r\n\r\n        </div>\r\n       \r\n    );\r\n  }\r\n}\r\n\r\nexport default ThreeMap;\r\n","import React from 'react';\r\n\r\nconst Likebtn = (props) => {\r\n  //  console.log(props)\r\n    return (\r\n        <button className=\"likeBtn\" onClick={() => props.onLike(props.postId)}><i className={props.theIcon}></i></button>\r\n    )\r\n}\r\n\r\nexport default Likebtn\r\n\r\n","import React from 'react';\r\nimport {Link} from 'react-router-dom'\r\n\r\nconst CommentSection = (props) => {\r\n    // console.log(\"LIST COMMENT\")\r\n    // console.log(props.allPostComments)\r\n    \r\n    const commentList = (allComments) => {\r\n        console.log(allComments)\r\n        if(allComments.length !== 0){\r\n        return (\r\n          <div className=\"CommentsContainer\">\r\n          {allComments.map(eachComment => {\r\n            return (\r\n              <div className='single-comment'>\r\n              <Link style={{textDecoration: 'none'}} to={`/profile/${eachComment.user._id}`}>\r\n              <span className='userCommentName'><img src={`${eachComment.user.imageUrl}`} style={{width:\"30px\", height:\"30px\", borderRadius:50, 'margin-left':'20px'}} alt='commentPicUser' ></img> {eachComment.user.username} </span>\r\n              </Link>\r\n              <span className='the-comment'>{eachComment.comment}</span>\r\n              </div>\r\n              )\r\n          })}\r\n          </div>\r\n        )\r\n    }else{\r\n        return (<div>THERE ARE NOT COMMENTS YET</div>)\r\n    }\r\n      }\r\n\r\n    return (\r\n        <div>\r\n        {props.allPostComments && commentList(props.allPostComments)}\r\n        {props.currentUser && \r\n            <div>\r\n            <input type='text' placeholder=\"Write a comment....\" name='comment' className='commentInput' value={props.comment} onChange={e => {props.updateComment(e)}}></input>\r\n        <button onClick={e => {props.handleComment(e, props.postId)}}>Post</button>\r\n            </div> }\r\n     \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CommentSection","import React from 'react'\r\n\r\nlet theImageId = ''\r\nconst Edit = (props) => {\r\n    const { image } = props\r\n    if(image){\r\n        theImageId = image._id \r\n    }\r\n    console.log(theImageId)\r\nreturn (\r\n    <div className='editUserFormContainer'>\r\n    <div className='editPostHeader'>\r\n    <h2>Update your Post</h2>\r\n    <button onClick={e => {props.exitEdit(e, theImageId)}} className='exitBtnEditUser'><i class=\"fas fa-times\"></i></button>\r\n    </div>\r\n            <form onSubmit={e => props.submitUpdate(e, image)} >\r\n               <h3>Caption</h3>\r\n                <textarea type=\"text\" name=\"caption\" placeholder={image.caption} className='captionFormPost' value={props.caption} onChange={e => props.handleUpdate(e)} />\r\n                <h2>Tags</h2>\r\n                <input type=\"text\" name=\"tags\" placeholder={image.tags} className='tagsFormPost' value={props.tags} onChange={e => props.handleUpdate(e)} />\r\n             \r\n                <button className=\"btn btn-sm btn-success\">Save Changes</button>\r\n            </form>\r\n        </div>\r\n)\r\n}\r\n\r\nexport default Edit","import React from 'react';\r\nimport ThreeMap from './ThreeMap';\r\nimport Likebtn from './/Likebtn';\r\nimport CommentSection from './CommentSection';\r\nimport { Link } from 'react-router-dom';\r\nimport SweetAlert from 'react-bootstrap-sweetalert';\r\nimport Editpost from './Editpost'\r\n\r\nlet height = \"50vh\"\r\nlet width = \"100vw\"\r\nvar requestFullscreen = function (ele) {\r\n  if (ele.requestFullscreen) {\r\n    ele.requestFullscreen();\r\n  } else if (ele.webkitRequestFullscreen) {\r\n    ele.webkitRequestFullscreen();\r\n  } else if (ele.mozRequestFullScreen) {\r\n    ele.mozRequestFullScreen();\r\n  } else if (ele.msRequestFullscreen) {\r\n    ele.msRequestFullscreen();\r\n  } else {\r\n    console.log('Fullscreen API is not supported.');\r\n  }\r\n};\r\n\r\n\r\nvar exitFullscreen = function () {\r\n  let theCanvas = document.getElementsByTagName('canvas')[0];\r\n  console.log(theCanvas);\r\n  if (theCanvas.style.height === \"100vh\") {\r\n    theCanvas.style.height = \"50vh\"\r\n  } else {\r\n    theCanvas.style.height = \"100vh\"\r\n  }\r\n};\r\n\r\nwindow.addEventListener('fullscreenchange', exitFullscreen);\r\nwindow.addEventListener('webkitfullscreenchange', exitFullscreen);\r\nwindow.addEventListener('mozfullscreenchange', exitFullscreen);\r\nwindow.addEventListener('MSFullscreenChange', exitFullscreen);\r\n\r\nconst SinglePost = props => {\r\n\r\n  console.log(\"this is signle post\", props)\r\n\r\n\r\n  function goBack() {\r\n    const { goBack } = props.history\r\n    goBack();\r\n  }\r\n\r\n  function isLiked(value, theArray, postId) {\r\n    if (value) {\r\n      const myId = value._id;\r\n      //  console.log(theArray)\r\n      //  console.log(theArray.findIndex(theId => theId._id === myId))\r\n      if (theArray.findIndex(theId => theId._id === myId) >= 0) {\r\n        return (<Likebtn onLike={props.handleLike} postId={postId} theIcon=\"fas fa-heart likeIcon\" />)\r\n      } else {\r\n        return (<Likebtn onLike={props.handleLike} postId={postId} theIcon=\"far fa-heart likeIcon\" />)\r\n      }\r\n    }\r\n  }\r\n\r\n  const fullScreen = (e) => {\r\n    e.preventDefault();\r\n    let myDiv = document.getElementById('WebGL-output');\r\n    requestFullscreen(myDiv)\r\n  }\r\n\r\n  //GET THE POST CREATION DATE\r\n  const postTime = (e) => {\r\n    return new Date(e).toDateString()\r\n  }\r\n\r\n  //CHECK USER WITH THE POST\r\n  const checkOwner = (thePost, user) => {\r\n    let thePostId = ''\r\n    let userId = ''\r\n    let thePostOwner = ''\r\n    if (user)\r\n      userId = user._id;\r\n    if (thePost) {\r\n      thePostId = thePost._id\r\n      thePostOwner = thePost.owner._id\r\n    }\r\n    if (userId === thePostOwner) {\r\n      return <div className='editOrDeletePost'><i className=\"fas fa-edit editIcon\" onClick={e => { props.handleEdit(e, thePostId) }}></i> <i className=\"fas fa-trash-alt deleteIcon\" onClick={e => props.confirmDelete()}></i></div>\r\n    }\r\n  }\r\n\r\n  //   console.log(\"PROPS!\")\r\n  // console.log(props)\r\n  const id = props.match.params.id\r\n\r\n  const theArr = props.postValues.filter(eachItem => {\r\n    return eachItem._id === id\r\n  })\r\n\r\n  const thePost = theArr[0];\r\n\r\n  if (thePost) {\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"singlePost\">\r\n          {thePost.modal &&\r\n            <div className='editUserProfileContainer'>\r\n              <Editpost exitEdit={props.handleEdit} image={thePost} handleUpdate={props.onChangeValue} submitUpdate={props.updatePost}></Editpost>\r\n            </div>}\r\n          <div className=\"singlePostHeader\">\r\n            <button className='goBack-btn' onClick={goBack}><i class=\"fas fa-arrow-left\"></i></button>\r\n            <img src={thePost.owner.imageUrl} style={{ width: \"65px\", height: \"65px\", borderRadius: 50, marginLeft: 30, marginRight: 30 }} alt=\"miniProfilePic\"></img>\r\n            <Link style={{ textDecoration: 'none' }} to={`/profile/${thePost.owner._id}`}>{thePost.owner.username}</Link>\r\n            {checkOwner(thePost, props.currentUser)}\r\n          </div>\r\n          <div>\r\n            <ThreeMap url={thePost.image} height={height} width={width} />\r\n          </div>\r\n          <button onClick={fullScreen} className='expandBtn'><i class=\"fas fa-expand-arrows-alt expandIcon\"></i><div className='expandText'>Expand</div></button>\r\n          <div className=\"singleFooter\">\r\n\r\n            <div className=\"singleLikes\">\r\n\r\n              <div className='like-counter'>\r\n                {isLiked(props.currentUser, thePost.likes, thePost._id)}\r\n                <span className='likeCount'>{thePost.likes.length} Likes</span>\r\n              </div>\r\n\r\n              <div className='post-date'>\r\n                {postTime(thePost.createdAt)}\r\n              </div>\r\n            </div>\r\n\r\n            <div className='postCaption'>\r\n              {thePost.caption}\r\n              <div className='tagName'>\r\n                {thePost.tags.map(eachTag => {\r\n                  return <Link to='/world' style={{ fontSize: 20 }} key={eachTag} onClick={e => props.updateQuery(eachTag)}>#{eachTag} </Link>\r\n                }\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              {<CommentSection currentUser={props.currentUser} comment={props.comment} allPostComments={thePost.comments} updateComment={props.onChangeValue} handleComment={props.handleComment} postId={thePost._id} />}\r\n            </div>\r\n\r\n          </div>\r\n\r\n          {props.showConfirm === true &&\r\n            <SweetAlert\r\n              warning\r\n              showCancel\r\n              confirmBtnText=\"Confirm!\"\r\n              confirmBtnBsStyle=\"danger\"\r\n              cancelBtnBsStyle=\"default\"\r\n              confirmBtnCssClass=\"confirmDelete\"\r\n              title=\"Are you sure?\"\r\n              onConfirm={e => props.onDelete(thePost._id)}\r\n              onCancel={e => props.cancelDelete()}\r\n            >\r\n              Do you want to delete this post?\r\n             </SweetAlert>\r\n          }\r\n\r\n\r\n        </div>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n  return (\r\n    <div>OH NO!</div>\r\n  )\r\n\r\n\r\n\r\n}\r\n\r\nexport default SinglePost;\r\n\r\n// {thePost.tags.map(eachTag => {\r\n//   return <Link to='/world' style={{fontSize:20}} key={eachTag} onClick={e => props.updateQuery(eachTag)}>#{eachTag} </Link>\r\n// }\r\n//   )}","import React from 'react';\r\nimport ThreeMap from './ThreeMap';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\n\r\nclass PostForm extends React.Component{\r\n\r\n    \r\n     state = {\r\n    imageUrl: \"\",\r\n    imageFile: [],\r\n    redirect: false,\r\n\r\n\r\n    }\r\n\r\n    componentDidMount(){\r\n        setTimeout(() => {\r\n            this.setState({redirect: true})}, 2000)\r\n    }\r\n\r\n    //STYLING \r\n    canvasStyle = {\r\n        height: \"38vh\",\r\n        width: \"77vw\"\r\n    }\r\n\r\n    height = \"38vh\"\r\n    width = \"78.95vw\"\r\n\r\n    style = {\r\n        \"display\": \"block\",\r\n        \"margin-top\": \"100px\",\r\n        \"margin-left\": \"auto\",\r\n        marginRight: \"auto\",\r\n        \"max-width\": \"600px\",\r\n        \"height\": \"300px\",\r\n        alignText: \"center\",\r\n        \"border\": \"1px solid black\"\r\n    }\r\n\r\n    canvasContainer = {\r\n        \"display\": \"block\",\r\n        \"border\": \"8px solid gray\", \r\n        'border-radius': '10px',\r\n        \"margin\": \"5px auto\",\r\n        height: \"40vh\",\r\n        width: \"80vw\"\r\n    }\r\n\r\n    createButton = {\r\n        \"display\": \"block\",\r\n        \"margin\": \"auto\"\r\n\r\n    }\r\n\r\n    formStyle = {\r\n        justifyContent: \"center\",\r\n        alignText: \"center\"\r\n    }\r\n\r\n// END OF STYLING\r\n\r\n    uploadPost = (e) => {\r\ne.preventDefault();\r\nconsole.log(e.target);\r\n    }\r\n\r\n    seePreview = (e) => {\r\n        e.preventDefault();\r\n\r\n        console.log(e.target.files);\r\n        if(e.target.files[0] && e.target.files[0].size <= 10485760){\r\n        let newImg = URL.createObjectURL(e.target.files[0])\r\n        this.props.changeFile(e.target.files[0])\r\n        this.props.changeUrl(newImg)\r\n    \r\n        this.setState({\r\n            imageUrl: newImg,\r\n            imageFile: e.target.files[0]})\r\n\r\n        this.changePreview(newImg)\r\n        \r\n        let myInput = document.getElementById('myFileList')\r\n        myInput.setAttribute('disabled', true);\r\n        myInput.className = \"inputDisabled\"\r\n    }else{\r\n        this.props.changeFile(e.target.files[0])\r\n    }\r\n    }\r\n\r\n    changePreview = (value) => {\r\n    \r\n        return (\r\n         \r\n            <div style={this.canvasStyle}>\r\n            {this.state.imageUrl && <ThreeMap url={value} height={this.height} width={this.width}/>}\r\n            </div>\r\n        \r\n        )\r\n   \r\n    }\r\n\r\n    // changeText = (e) =>{\r\n    //     this.setState({\r\n    //         [e.currentTarget.name]: e.currentTarget.value\r\n    //     })\r\n    // }\r\n\r\n    removePicture = (e) => {\r\n       e.preventDefault();\r\n        let myFileList = document.getElementById('myFileList');\r\n        myFileList.removeAttribute('disabled');\r\n        myFileList.value = null\r\n        myFileList.className = \"inputfile\"\r\n        this.setState({imageUrl: \"\",\r\n        imageFile: []\r\n    })\r\n    }\r\n\r\n    render(){\r\n        const {caption, tags, currentUser, postMade} = this.props.formValues\r\n        if(currentUser && !postMade){\r\n        return(\r\n            <div className=\"formPost\">\r\n            <h1>New Experience</h1>\r\n            {this.props.formValues.message}\r\n            <form style={this.formStyle} onSubmit={this.props.handleSubmit}>\r\n            \r\n            <div className='canvasAndFileContainer'>\r\n            <div className='borderCanvasPost'>\r\n            <span style={this.canvasContainer} id=\"myCanvasContainer\">\r\n            {this.changePreview(this.state.imageUrl)}\r\n            </span>\r\n            </div>\r\n            </div>\r\n            \r\n            <div className='fileHandlePostForm'>\r\n\r\n            <span className='chooseFileBtnContainer'>\r\n            <input type=\"file\" onChange={this.seePreview} id=\"myFileList\" className=\"inputfile\"></input>\r\n            <label htmlFor=\"myFileList\"> <span className='inputFileText'>Choose a file</span> <span className='inputFileText'>|</span><i class=\"fas fa-upload uploadIcon\"></i></label>\r\n            </span>\r\n          \r\n            <span className='fileSizeText'>(File size max 10 Mb)</span>\r\n\r\n            <span className='removeBtnContainer'>\r\n            <button onClick={this.removePicture} className=\"removeBtn\"> <span className='inputFileText'>REMOVE</span> <span className='inputFileText'>|</span><i class=\"fas fa-redo redoIcon\"></i></button>\r\n            </span>\r\n\r\n            </div>\r\n           \r\n           <div className='mainPostFormContainer'>\r\n           <span className='captionContainerPostForm'>\r\n           <span className=\"tagsTitle\">Caption: </span>\r\n           <textarea className='captionPostForm' type=\"text\" value={caption} onChange={ e => this.props.onChangeValue(e)} name=\"caption\" ></textarea>\r\n           </span>\r\n           <span className=\"tagTitleAndTextarea\">\r\n           <span className=\"tagsTitle\">Tags: </span>\r\n           <textarea className='tagsPostForm' type=\"text\" value={tags} onChange={ e => this.props.onChangeValue(e)} name=\"tags\" placeholder=\"e.g: #Beach #Sun #Ocean\"></textarea>\r\n           </span>\r\n           </div>\r\n\r\n            <button className='createNewPost' style={this.createButton}>CREATE NEW EXPERIENCE</button>\r\n            </form>\r\n\r\n            <div>\r\n          \r\n            </div>\r\n            </div>\r\n        )\r\n    }else if(currentUser && postMade){\r\n       return( <Redirect to='/world'/> )\r\n    }else if(this.state.redirect){\r\n        return( <Redirect to='/login'/> )\r\n    }else{\r\n        return (<div>LOADING...</div>)\r\n    }\r\n    }\r\n\r\n}\r\n//<img src={this.state.imageUrl} alt=\"Choose a file\" height=\"300px\" width=\"500px\"></img>\r\nexport default PostForm;","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\n// import the service file since we need it to send (and get) the data to(from) server\r\n\r\nlet img = \"\"\r\n\r\nconst Signup = (props) => {\r\n\r\n \r\n    let finished = false;\r\n\r\n\r\n  function seePreview(e) {\r\n        e.preventDefault();\r\n        console.log(e.target.files[0]);\r\n        if(e.target.files[0].size <= 10485760){\r\n        let newImg = URL.createObjectURL(e.target.files[0])\r\n        img = newImg;\r\n        props.changeFile(e.target.files[0])\r\n    }\r\n        // this.setState({imageFile: e.target.files[0]})\r\n\r\n    }\r\n   \r\n        console.log(props);\r\n        const {username, email, password} = props.formValues\r\n        if(finished || props.currentUser){\r\n            return (\r\n                <Redirect to={`/profile/${props.currentUser._id}`}/>\r\n            )\r\n        }\r\n        return(\r\n            <div className={props.styling}>\r\n        <div className='signupFormContainer'>\r\n        \r\n        <div className='signupContainerForm'>\r\n            <div className='signupFormHeader'>\r\n            <div className='signupTitleForm'>\r\n            <h1> Sign up </h1>\r\n            </div>\r\n            <button onClick={e => {props.exitSignup(e)}} className='exitBtnEditUser exitSignup'><i class=\"fas fa-times\"></i></button>\r\n            </div>\r\n\r\n            <form onSubmit={props.handleSubmit} className='signupFormBody'>\r\n\r\n            <div className='signupPicContainer'>\r\n            <img src={img} alt=\"Choose a file\" className='signupPic'></img>\r\n            </div>\r\n            \r\n            <div className='signupFormInput'>\r\n            <label>Username: </label>\r\n            <input type=\"text\" name=\"username\" value={username} onChange={ e => props.onChangeValue(e)}></input>\r\n            </div>\r\n\r\n            <div className='signupFormInput'>\r\n            <label>Email: </label>\r\n            <input type=\"email\" name=\"email\" value={email} onChange={ e => props.onChangeValue(e)}></input>\r\n            </div>\r\n\r\n            <div className='signupFormInput'>\r\n            <label>Password: </label>\r\n            <input type=\"password\" name=\"password\" value={password} onChange={ e => props.onChangeValue(e)}></input>\r\n            </div>\r\n\r\n            <div className='signupFormInput'>\r\n            <label>Profile Picture </label>\r\n            <input type=\"file\" onChange={seePreview} name=\"imageFile\"></input>\r\n            </div>\r\n            <button className='signupFormBtn'>Join</button>\r\n            </form>\r\n\r\n        </div>\r\n        </div>\r\n        {props.message  && <div> { props.message } </div> }\r\n        </div> \r\n\r\n        )\r\n  \r\n}\r\n\r\nexport default Signup;\r\n\r\n   // constructor(props){\r\n    //     super(props);\r\n\r\n    //     this.state={\r\n    //         username: \"\",\r\n    //         email: \"\",\r\n    //         password: \"\",\r\n    //         imageUrl: \"\",\r\n    //         imageFile: [],\r\n    //         finished: false\r\n    //     }\r\n    // }\r\n\r\n    \r\n    // updateValueField = (e) => {\r\n    //     console.log(e.target)\r\n    //     this.setState({\r\n    //         [e.target.name]: e.target.value\r\n    //     })\r\n    // }\r\n\r\n    // makeNewUser = (e) => {\r\n    //     e.preventDefault();\r\n    //     if(this.state.imageFile.length > 0){\r\n    //                //UPLOAD TO CLOUDINARY\r\n    //                const uploadData = new FormData();\r\n    //                uploadData.append(\"imageUrl\", this.state.imageFile);\r\n           \r\n    //                service.handleUpload(uploadData)\r\n    //                .then(response => {\r\n    //                    // console.log('response is: ', response);\r\n    //                    // after the console.log we can see that response carries 'secure_url' which we can use to update the state \r\n    //                    this.setState({ imageUrl: response.secure_url });\r\n\r\n    //                    //CALL TO THE SIGNUP ROUTE\r\n    //                    axios.post('http://localhost:5000/auth/signup', this.state, {withCredentials: true})\r\n    //                    .then(theData => {\r\n    //                        console.log(\"NEW USER!\")\r\n    //                        console.log(theData)\r\n    //                        this.setState({finished: true})\r\n    //                    })\r\n    //                    .catch(err => console.log(err));\r\n               \r\n               \r\n    //                  })\r\n    //                  .catch(err => {\r\n    //                    console.log(\"Error while uploading the file: \", err);\r\n    //                  });\r\n    //                 }else{\r\n                       \r\n    //                    //CALL TO THE SIGNUP ROUTE\r\n    //                    axios.post('http://localhost:5000/auth/signup', this.state, {withCredentials: true})\r\n    //                    .then(theData => {\r\n    //                        console.log(\"NEW USER!\")\r\n    //                        console.log(theData)\r\n    //                        this.setState({finished: true})\r\n    //                    })\r\n    //                    .catch(err => console.log(err));\r\n                \r\n    //                 }\r\n\r\n             \r\n    // }","import React from 'react';\r\nimport { Redirect } from 'react-router-dom'\r\n\r\nconst Login = (props) => {\r\n\r\n        const { username, password, currentUser } = props.formValues\r\n        if(currentUser){\r\n            return (\r\n                <Redirect to={`/home`}/>\r\n            )\r\n        }else{\r\n        return(\r\n            <div className={props.styling}>\r\n        <div className='loginFormContainer'>\r\n        \r\n            <div className='loginFormHeader'>\r\n            <div className='loginTitleForm'>\r\n            <h1> Login </h1>\r\n            </div>\r\n            <button onClick={e => {props.exitLogin(e)}} className='exitBtnEditUser '><i class=\"fas fa-times\"></i></button>\r\n            </div>\r\n            <form onSubmit ={props.handleSubmit} className='loginFormBody' >\r\n\r\n            <div className='loginFormInput'>\r\n            <label> Username: </label>\r\n             <input value={username} onChange={ e => props.onChangeValue(e)} type=\"text\" name=\"username\" placeholder=\"username\" />\r\n             </div>\r\n\r\n             <div className='loginFormInput'>\r\n            <label> Password: </label>\r\n            <input value={password} onChange={ e => props.onChangeValue(e)} type=\"password\" name=\"password\" placeholder=\"***********\"/>\r\n            </div>\r\n             <button className='loginFormBtn'> Login </button>\r\n\r\n        </form>\r\n\r\n        <section>\r\n        {props.message  && <div> { props.message } </div> }\r\n        </section>\r\n        </div>\r\n        </div> \r\n      \r\n        )\r\n    }\r\n    }\r\n\r\nexport default Login;\r\n\r\n\r\n    // constructor(props){\r\n    //     super(props);\r\n    //     this.state = {\r\n    //         username: \"\",\r\n    //         password: \"\",\r\n    //         message: null\r\n    //     }\r\n    // }\r\n\r\n    // genericSync(event){\r\n    //     const {name, value} = event.target;\r\n    //     this.setState({[name]: value})\r\n    // }\r\n\r\n    // handleSubmit(event){\r\n    //     event.preventDefault();\r\n\r\n    //     Axios.post('http://localhost:5000/auth/login', this.state, {withCredentials: true})\r\n    //     .then(responseFromServer => {\r\n    //         console.log(responseFromServer.data.userDoc)\r\n    //         const { userDoc } = responseFromServer.data;\r\n    //         this.props.onUserChange(userDoc);\r\n          \r\n    //         alert(\"You are logged in.\")\r\n    //         // return <Redirect to='/profile'/>\r\n    //     })\r\n    //     .catch(err => {\r\n    //         console.log(err)\r\n    //         // if(err.response.data) return this.setState({message: err.response.data.message})\r\n    //     })\r\n    // }","import React from 'react';\r\n\r\nlet img = ''\r\n\r\nconst EditUser = (props) => {\r\n    const { currentUser, styling } = props\r\n    \r\n    function changePicture(e){\r\n        if(img === ''){\r\n           return <img src={currentUser.imageUrl} alt=\"Choose a file\" className='editUserPicture'></img>\r\n        }else{\r\n            return <img src={img} alt=\"Choose a file\" className='editUserPicture'></img>\r\n        }\r\n \r\n    }\r\n\r\n    function seePreview(e){\r\n        e.preventDefault();\r\n        console.log(e.target.files[0]);\r\n        if(e.target.files[0].size <= 10485760){\r\n        let newImg = URL.createObjectURL(e.target.files[0])\r\n        img = newImg;\r\n        props.changeFile(e.target.files[0])\r\n    }\r\n        // this.setState({imageFile: e.target.files[0]})\r\n\r\n    }\r\n\r\n    return(\r\n        <div className={styling}>\r\n        <div className='editUserHeader'>\r\n        <h2>Update your Profile</h2>\r\n        <button onClick={e => {props.exitEdit(e)}} className='exitBtnEditUser'><i class=\"fas fa-times\"></i></button>\r\n        </div>\r\n        <form onSubmit={ e => props.submitUpdate(e, currentUser)}>\r\n        {changePicture()}\r\n       \r\n        <input type='file' onChange={seePreview} className='chooseFileUserEdit'></input>\r\n        \r\n        <textarea type=\"text\" name=\"bio\" placeholder={currentUser.bio} onChange={e => props.handleUpdate(e)} className='editUserCaption' />\r\n        <button>Update profile</button>\r\n        </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditUser;","import React from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\nconst FollowContainer = (props) => {\r\nconsole.log(props)\r\nconst {users, following, followers, listFollowing, listFollowers, currentUser } = props\r\nlet followingList = [];\r\n// let followerList = [];\r\n\r\nlet followingClasses = listFollowing ? 'followingContainerHeaderDark' : 'followingContainerHeader'\r\nlet followerClasses = listFollowers ? 'followerContainerHeaderDark' : 'followerContainerHeader'\r\n\r\nfunction isFollowing(myUser, eachUser){\r\n    console.log(myUser)\r\n    console.log(eachUser)\r\nif(eachUser._id !== myUser._id){\r\n    if(myUser.following.indexOf(eachUser._id) >= 0){\r\n        return <button className=\"btn btn-sm  btn-primary\" onClick={e => props.handleFollow(eachUser._id)}><i className=\"fa fa-user-minus followBtn\"> Unfollow </i></button>\r\n    }else{\r\n        return   <button className=\"btn btn-sm  btn-primary\" onClick={e => props.handleFollow(eachUser._id)}><i className=\"fa fa-user-plus followBtn\"> Follow </i></button>\r\n    }\r\n   \r\n}else{\r\n    return <div></div>;\r\n}\r\n}\r\n\r\nfunction displayFollowingUsers(theArray, theUser){\r\nif(theArray.length > 0 && users.length > 0){\r\n    followingList = users.filter(eachUser => {\r\n        return theArray.indexOf(eachUser._id) >= 0\r\n    })\r\n    console.log(followingList)\r\n    console.log(theUser.following)\r\nreturn followingList.map(eachUser => {\r\n    return <div key={eachUser._id} className='userMiniFollowBox'>\r\n    <span className='followThumbImgName'>\r\n    <img src={eachUser.imageUrl} alt='thumbFollowing' className='pictureFollowList'></img>\r\n    <span onClick={e => {props.exitContainer(e)}}><Link to={`/profile/${eachUser._id}`} className='pictureFollowName' >{eachUser.username}</Link></span>\r\n    </span>\r\n    {theUser && isFollowing(theUser, eachUser)}\r\n    </div>\r\n})\r\n}else{\r\n    return <div>NO USERS!</div>\r\n}\r\n}\r\n\r\n    return (\r\n  \r\n            <div className='editUserFormContainer'>\r\n            <div className='FollowHeader'>\r\n            <span className={followerClasses} onClick={e => props.showFollowers(e, 'followers')}>Followers</span><span className={followingClasses} onClick={e => props.showFollowers(e, 'following')}><span className='followingText'>Following</span> <button onClick={e => {props.exitContainer(e)}} className='exitBtnFollow'><i class=\"fas fa-times\"></i></button> </span>        \r\n            </div>\r\n            <div className='followListContainer'>\r\n            {listFollowing && displayFollowingUsers(following, currentUser)}\r\n            {listFollowers && displayFollowingUsers(followers, currentUser)}\r\n            </div>\r\n\r\n                </div>\r\n  \r\n    )\r\n}\r\n\r\nexport default FollowContainer","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport EditUser from './EditUser'\r\nimport FollowContainer from './FollowContainer'\r\n\r\n//{(theUserId !== profileId) ? <button className='goBackBtn' onClick={goBack}>Go back</button> : ''}\r\n\r\nconst UserProfile = (props) => {\r\n    const { images, currentUser, users, showEdit, followContainer } = props\r\n    const theUserId = currentUser._id\r\n    const profileId = props.match.params.id\r\n    console.log('these are users', users)\r\n    console.log('these is currentUSer', currentUser)\r\n\r\n    console.log(\"THESE ARE THE PROPS\", props)\r\n    console.log('these are the images', images)\r\n    console.log('THERE IS FOLLOWCONTAINER', followContainer)\r\n\r\n    function goBack() {\r\n        const { goBack } = props.history\r\n        goBack();\r\n    }\r\n\r\n    function haveLogout(userFollowers) {\r\n        if (theUserId === profileId) {\r\n            return <div className=\"buttons\" >\r\n                <button onClick={props.handleEditProfile} className='editUserProfileIcon'><i class=\"fas fa-user-edit\"></i></button>\r\n            </div>\r\n        } else {\r\n            console.log(userFollowers)\r\n            console.log(userFollowers.indexOf(theUserId))\r\n            if (userFollowers.indexOf(theUserId) >= 0) {\r\n                return (<button className=\"btn btn-sm  btn-primary\" onClick={e => props.handleFollow(profileId)}><i className=\"fa fa-user-minus followBtn\"> Unfollow </i></button>)\r\n            } else {\r\n                return (<button className=\"btn btn-sm  btn-primary\" onClick={e => props.handleFollow(profileId)}><i className=\"fa fa-user-plus followBtn\"> Follow </i></button>)\r\n            }\r\n        }\r\n    }\r\n\r\n    function havePermission(thePostId) {\r\n        if (theUserId === profileId) {\r\n            return (\r\n                <React.Fragment>\r\n                    <div className='editOrDeletePost'><i class=\"fas fa-edit editIcon\" onClick={e => { props.handleEdit(e, thePostId) }}></i> <i class=\"fas fa-trash-alt deleteIcon\" onClick={e => props.confirmDelete()}></i></div>\r\n                </React.Fragment>)\r\n        } else {\r\n            return;\r\n        }\r\n    }\r\n\r\n    const pics = images.filter(image => image.owner._id === profileId)\r\n\r\n    const test = users.filter(theUser => theUser._id === profileId)\r\n    console.log(\"these are the test\", test)\r\n\r\n    const userDetails = users.filter(theUser => theUser._id === profileId)[0]\r\n\r\n    const classes = showEdit ? 'editUserFormContainer' : 'editUserFormContainer hide'\r\n    if (userDetails) {\r\n        return (\r\n            <div className='profileContainer'>\r\n\r\n                {props.handleShowFollow}\r\n                {followContainer && <div className='followUserContainer'> <FollowContainer users={users} currentUser={currentUser} handleFollow={props.handleFollow} following={userDetails.following} followers={userDetails.followers} listFollowers={props.listFollowers} listFollowing={props.listFollowing} exitContainer={e => props.handleShowFollow(e)} showFollowers={e => props.showFollowers(e)} /> </div>}\r\n                {showEdit && <div className='editUserProfileContainer'>\r\n                    <EditUser exitEdit={props.handleEditProfile} handleUpdate={props.onChangeValue} currentUser={currentUser} submitUpdate={props.updateUser} changeFile={props.changeFile} styling={classes} />\r\n                </div>}\r\n                <div className=\"user-profile\">\r\n                    <span className=\"user-profile-img\">{currentUser && <img src={userDetails.imageUrl} className='userProfileImg' alt=\"profile-img\" />}\r\n                        {haveLogout(userDetails.followers)}\r\n                    </span>\r\n\r\n                    <div className='user-profile-nameAbio'>\r\n                        <div className='user-profile-username'>{userDetails.username}</div>\r\n                        <div className='user-profile-bio'>{userDetails.bio}</div>\r\n                    </div>\r\n\r\n                    <div className='userPostAndFollowers'>\r\n                        <div className='userPostCounter'>\r\n                            <div className='userPostCounterText'>Posts: {pics.length}</div>\r\n                        </div>\r\n                        <div className='userFollowersContainer'>\r\n                            <div className='userFollowers'>\r\n                                <span className=\"followUser\"><button className='followBtnProfile' onClick={e => props.handleShowFollow(e)}>Followers:</button> {userDetails.followers.length}</span>\r\n                            </div>\r\n                            <div className='userFollowers'>\r\n                                <span className=\"followUser\"><button className='followBtnProfile' onClick={e => props.handleShowFollow(e)}>Following:</button> {userDetails.following.length}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                <div className=\"profilePostContainer\" >\r\n                    {pics && pics.map(pic => {\r\n                        return (\r\n                            <div className=\"profilePost\" key={pic._id} >\r\n                                <div className=\"profileImgContainer\">\r\n                                    <img className=\"profileImg\" src={pic.image} alt=\"worldPic\" width=\"100%\" height=\"300px\" />\r\n                                    <div className=\"profileOverlayContainer\" >\r\n                                        <div className=\"textOverlayProfile\" id={pic._id}>\r\n                                            {havePermission(pic._id)}\r\n\r\n                                            <Link to={`/post/${pic._id}`} style={{ textDecoration: 'none', color: 'white' }}>See the full Post</Link>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                        )\r\n                    })\r\n                    }\r\n                </div>\r\n                {!pics.length && <p>You dont have any posts </p>}\r\n            </div>\r\n\r\n        )\r\n    } else {\r\n        return (\r\n            <div>LOADING...</div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default UserProfile;","import React from 'react';\r\nimport Login from './user-pages/Login'\r\nimport Signup from './user-pages/Signup'\r\n\r\n\r\nconst Home = (props) => {\r\n\r\n    const {showLogin, showSignup} = props\r\n    const classes = showLogin ? 'LoginFormContainer' : 'LoginFormContainer hide'\r\n    const classesSign = showSignup ? 'SignupFormContainer' : 'SignupFormContainer hide'\r\n        return (\r\n            <div className=\"HomePage\">\r\n            {props.showLogin && \r\n                <div className='LoginFormContainer'>\r\n                <Login formValues={props.formValues} handleSubmit={props.handleSubmit} onChangeValue={props.onChangeValue} styling={classes} exitLogin={props.exitLogin}></Login></div>}\r\n\r\n            {props.showSignup && \r\n                    <div className='SignupFormContainer'>\r\n                    <Signup formValues={props.formValues} handleSubmit={props.handleSignUp} changeFile={props.changeFile} onChangeValue={props.onChangeValue} styling={classesSign} exitSignup={props.exitSignup}></Signup></div>}\r\n\r\n\r\n            <div className=\"HomeItem HomeItem1\"><div className='HomeText1'>SHARE</div></div>\r\n            <div className=\"HomeItem HomeItem2\"><div className='HomeText2'>YOUR</div></div>\r\n            <div className=\"HomeItem HomeItem3\"><div className='HomeText3'>WORLD</div></div>\r\n        </div>\r\n        )\r\n  \r\n}\r\n\r\nexport default Home","import React from 'react';\r\nimport Likebtn from './Likebtn'\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst HomeFeed = props => {\r\n    let feedList = []\r\n    let userList = []\r\nconst {currentUser, allPosts} = props\r\nif(currentUser){\r\n     userList = currentUser.following\r\n    if(allPosts.length){\r\n        feedList = allPosts.filter(eachPost => { return userList.indexOf(eachPost.owner._id) >= 0 || eachPost.owner._id === currentUser._id })\r\n    }\r\n}\r\n\r\nfunction isLiked(value, theArray, postId){\r\n    if(value){\r\n       const myId = value._id;\r\n       if(theArray.findIndex(theId => theId._id === myId) >= 0){\r\n         return( \r\n             <div className='likeContainerHome'> \r\n             <Likebtn onLike={props.handleLike} postId={postId} theIcon=\"fas fa-heart likeIconHome\"/> \r\n             <span>{theArray.length} Likes</span>\r\n             </div>\r\n            )\r\n       }else{\r\n          return(\r\n              <div className='likeContainerHome'>\r\n            <Likebtn onLike={props.handleLike} postId={postId} theIcon=\"far fa-heart likeIconHome\"/>\r\n            <span>{theArray.length} Likes</span>\r\n            </div>)\r\n       }\r\n    }\r\n }\r\n\r\n  //GET THE POST CREATION DATE\r\n  const postTime = (e) => {\r\n    return new Date(e).toDateString()\r\n  }\r\n\r\n //SORT ALL THE IMAGES FROM THE RECENT TO THE OLDEST ONE\r\nconst sortedList = feedList.sort((a, b) => {\r\n    return new Date(b.createdAt) - new Date(a.createdAt)\r\n})\r\n\r\n    if(currentUser !== null){\r\n        return(\r\n            <div>\r\n\r\n            <div>\r\n            {feedList.length > 0 ? sortedList.map(eachPost => {\r\n                return <div className=\"col-s-12 feedPost\" key={eachPost._id} >\r\n            <div className='homePostHeader'>\r\n            <img src={eachPost.owner.imageUrl} style={{width:\"50px\", height:\"50px\", borderRadius:50}} alt=\"miniProfilePic\"></img>\r\n            \r\n           <Link style={{textDecoration: 'none', fontSize:22, marginLeft:15 , fontWeight:'bold', color:'black'}} to={`/profile/${eachPost.owner._id}`}> {eachPost.owner.username}</Link>\r\n            </div>\r\n\r\n            <div className=\"homeImgContainer\">\r\n            <img  className=\"worldImg\" src={eachPost.image}  alt=\"worldPic\" width=\"100%\" height=\"300px\"></img>\r\n\r\n            <div className=\"overlayContainer\" >\r\n\r\n            <div className=\"textOverlay\" id={eachPost._id}>\r\n            {isLiked(props.currentUser, eachPost.likes, eachPost._id)}\r\n            <div className='commentlength-container'>{eachPost.comments.length} Comments</div>\r\n            <Link style={{textDecoration: 'none', color:'white'}} to={`/post/${eachPost._id}`}> \r\n            <div className='fullPostText'>See the full Post</div>\r\n            </Link>\r\n            </div>\r\n            \r\n            </div>\r\n           \r\n            </div>\r\n            <div className='homePostFoot'>\r\n            \r\n            <p>{eachPost.caption}</p>\r\n            <p>{postTime(eachPost.createdAt)}</p>\r\n            </div>\r\n            </div>\r\n            }): <div className='startFollowingContainer'><div className='startFollowingWorldText'>START FOLLOWING PEOPLE\r\n            <p> <Link to='/world' className='seeWorldText'>(EXPLORE WORLD) </Link></p>OR UPLOAD YOUR OWN EXPERIENCES!</div></div>}\r\n            </div>\r\n            </div>\r\n        )\r\n    }else{\r\n        return  <div>LOADING...</div>\r\n    }\r\n\r\n}\r\n\r\nexport default HomeFeed","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Likebtn from './Likebtn';\r\n\r\nconst WorldPost = props => {\r\n\r\n   console.log(props)\r\n   let arrayOfPosts = []\r\n\r\n   function isLiked(value, theArray, postId) {\r\n      if (value) {\r\n         const myId = value._id;\r\n         if (theArray.findIndex(theId => theId._id === myId) >= 0) {\r\n            return (\r\n               <div className='likeContainerWorld'>\r\n                  <Likebtn onLike={props.handleLike} postId={postId} theIcon=\"fas fa-heart likeIconWorld\" />\r\n                  <span>{theArray.length} Likes</span>\r\n               </div>)\r\n         } else {\r\n            return (\r\n               <div className='likeContainerWorld'>\r\n                  <Likebtn onLike={props.handleLike} postId={postId} theIcon=\"far fa-heart likeIconWorld\" />\r\n                  <span>{theArray.length} Likes</span>\r\n               </div>)\r\n         }\r\n      }\r\n   }\r\n   let { query, currentUser } = props\r\n\r\n\r\n   if (query !== '') {\r\n      let theQuery = query.toLowerCase();\r\n      let queryList = props.allPosts.filter(eachPost => { return eachPost.tags.join('').toLowerCase().includes(theQuery) })\r\n      arrayOfPosts = queryList\r\n   } else {\r\n      arrayOfPosts = props.allPosts\r\n   }\r\n\r\n\r\n   if (currentUser && arrayOfPosts.length > 0) {\r\n      return (\r\n\r\n         <div>\r\n            <input type=\"text\" placeholder=\"Search\" onChange={e => { props.onChangeValue(e) }} name='queryInput' className=\"mr-sm-2 worldSearchInput\" />\r\n            <h1>Explore the World</h1>\r\n            <div className=\"worldContainer\">\r\n               {arrayOfPosts && arrayOfPosts.map(image => {\r\n                  return <div className=\"worldPost\" key={image._id} >\r\n                     <div className=\"worldImgContainer\">\r\n                        <img className=\"worldImg\" src={image.image} alt=\"worldPic\" width=\"100%\" height=\"300px\" />\r\n\r\n\r\n                        <div className=\"overlayContainer\" >\r\n                           <div className=\"textOverlayWorld\" id={image._id}>\r\n                              <div className='worldUserOverlay'>\r\n                                 <img src={image.owner.imageUrl} style={{ width: \"70px\", height: \"70px\", borderRadius: 50, marginRight: '1vw' }} alt=\"miniProfilePic\" />\r\n                                 <Link to={`/profile/${image.owner._id}`} style={{ textDecoration: 'none', color: 'white', fontSize: 20 }}> {image.owner.username}</Link>\r\n                                 <div className='overlayTextWorld'>\r\n                                    {isLiked(props.currentUser, image.likes, image._id)}\r\n                                    <div className='Worldcommentlength-container'>{image.comments.length} Comments</div>\r\n                                 </div>\r\n                                 <Link to={`/post/${image._id}`} style={{ textDecoration: 'none', color: 'white' }}><div className='fullPostText'> See the full Post</div></Link>\r\n                              </div>\r\n                           </div>\r\n                        </div>\r\n\r\n                     </div>\r\n                  </div>\r\n\r\n               })}\r\n\r\n            </div>\r\n         </div>\r\n      )\r\n   } else if (currentUser && arrayOfPosts.length === 0 && query) {\r\n      return (\r\n         <div>\r\n            <input type=\"text\" placeholder=\"Search\" onChange={e => { props.onChangeValue(e) }} name='queryInput' className=\"mr-sm-2\" />\r\n            <h1>Explore the World</h1>\r\n            <div>OH NO! THERE ARE NO POSTS!</div>\r\n         </div>\r\n      )\r\n   } else {\r\n      return (\r\n         <div>\r\n            <h1>Explore the World</h1>\r\n            <div>OH NO! THERE ARE NO POSTS!</div>\r\n         </div>\r\n      )\r\n   }\r\n}\r\n\r\n\r\nexport default WorldPost;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom'\r\nimport { Navbar, Nav, NavDropdown } from 'react-bootstrap'\r\n\r\n\r\nconst NavBar = (props) => {\r\n  function displayNotifications(notifications){\r\n    // console.log(\"WORKING\")\r\n    // console.log(notifications)\r\n    if(notifications.length){\r\n      notifications.sort((a,b) => {\r\nif(a.createdAt < b.createdAt){\r\n  return 1;\r\n}else if(a.createdAt > b.createdAt){\r\n  return -1\r\n}else{\r\n  return 0\r\n}\r\n      })\r\n\r\nif(notifications.length > 0){\r\nreturn(\r\n      <NavDropdown title=\"Notifications\" id=\"basic-nav-dropdown\">\r\n      {notifications && notifications.map(eachNotification => {\r\n        if(eachNotification.type === \"Like\" || eachNotification.type === \"Comment\" ){\r\n          if(eachNotification.imageTo !== null){\r\n            return (\r\n              <React.Fragment key={eachNotification._id}>\r\n              <NavDropdown.Item href={`/post/${eachNotification.imageTo._id}`} style={{width:'19.8vw'}}>\r\n              <span className='notification-userImage'><img src={eachNotification.fromWho.imageUrl} alt='notiPicture'></img></span>\r\n              <span className='notificationText'>\r\n              <span className='notifiUser'>{eachNotification.fromWho.username}</span> {eachNotification.event}</span> \r\n             <span className='postPictureNoti'><img src={eachNotification.imageTo.image} style={{width:\"30px\", height:\"30px\", borderRadius:50}} alt='notiPostPicture'></img></span>\r\n              </NavDropdown.Item>\r\n            <NavDropdown.Divider />\r\n            </React.Fragment>)\r\n          }\r\n        }else if(eachNotification.type === \"Follow\"){\r\n          return (\r\n            <React.Fragment key={eachNotification._id}>\r\n\r\n            <Link to={`/profile/${eachNotification.fromWho._id}`} style={{ textDecoration: 'none', color: 'black' }} className='dropdown-item'>\r\n            <span className='notification-userImage'><img src={eachNotification.fromWho.imageUrl} alt='notiPicture'></img></span>\r\n            <span className='notificationText'>\r\n              <span className='notifiUser'>{eachNotification.fromWho.username}</span> {eachNotification.event}</span> \r\n            </Link>\r\n\r\n          <NavDropdown.Divider />\r\n          </React.Fragment>\r\n          )\r\n        }\r\n\r\n      })}\r\n    </NavDropdown>\r\n    )}\r\n\r\n    }else {\r\n      return (<NavDropdown title=\"Notifications\" id=\"basic-nav-dropdown\"></NavDropdown>)\r\n    }\r\n  }\r\n\r\n  if (props) {\r\n    return (\r\n      <React.Fragment>\r\n        <Navbar bg=\"dark\" variant='dark' expand=\"lg\">\r\n          <Link to=\"/home\" className='nav-link navBarBrand' style={{textDecoration: 'none', color: 'white'}}>TriShare</Link>\r\n          <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n          <Navbar.Collapse id=\"basic-navbar-nav\">\r\n            {props.currentUser ? <Nav className=\"mr-auto\">\r\n              <Link to=\"/world\" className='nav-link'>World</Link>\r\n              <Link to=\"/newPost\" className='nav-link'>New Experience</Link>\r\n              {displayNotifications(props.notifications)}\r\n              <Link to={`/profile/${props.currentUser._id}`} className='nav-link'><i className=\"fas fa-user\" style={{ marginRight: 3 }}></i>Profile</Link>\r\n              <NavDropdown title={<i className=\"fas fa-cog\"></i>} id=\"basic-nav-dropdown\" className='gearUserNav'>\r\n                <NavDropdown.Item onClick={props.onLogout} style={{ color: 'red' }}>Logout</NavDropdown.Item>\r\n              </NavDropdown>\r\n            </Nav> :\r\n              <Nav className=\"mr-auto\">\r\n                <Nav.Item as='button' onClick={e => props.revealLoginForm(e)} className='nav-link navBarBtn'>Login</Nav.Item>\r\n                <Nav.Item as='button' onClick={e => props.revealSignupForm(e)}  className='nav-link navBarBtn'>Signup</Nav.Item>\r\n              </Nav>\r\n            }\r\n          </Navbar.Collapse>\r\n        </Navbar>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default NavBar;\r\n\r\n//<img src='/triShareLogo2.png' className='TriShareLogo' alt='logoApp'></img>","import axios from 'axios';\r\n\r\nconst service = axios.create({\r\n    baseURL: `https://thetrishare.herokuapp.com/api`,\r\n    // withCredentials: true // => you might need this when having the users in the app \r\n  });\r\n\r\nconst errorHandler = err => {\r\n    // console.error(err);\r\n    throw err;\r\n  };\r\n  \r\n  export default {\r\n    service,\r\n  \r\n    handleUpload (theFile) {\r\n      // console.log('file in service: ', theFile)\r\n      return service.post('/upload', theFile)\r\n        .then(res => res.data)\r\n        .catch(errorHandler);\r\n    },\r\n  \r\n    saveNewThing (newThing) {\r\n      // console.log('new thing is: ', newThing)\r\n      return service.post('/things/create', newThing)\r\n        .then(res => res.data)\r\n        .catch(errorHandler);\r\n    }\r\n  }\r\n\r\n  //`https://trishare.herokuapp.com/api`","import React, { Component } from 'react';\r\nimport {Switch, Route, Redirect } from 'react-router-dom'\r\nimport SinglePost from './Components/SinglePost';\r\nimport PostForm from './Components/PostForm';\r\nimport Signup from './Components/user-pages/Signup'\r\nimport Login from './Components/user-pages/Login'\r\nimport UserProfile from './Components/UserProfile';\r\nimport Home from './Components/Home';\r\nimport \"./index.css\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport axios from \"axios\";\r\nimport HomeFeed from './Components/HomeFeed';\r\nimport WorldPost from './Components/WorldPost';\r\nimport NavBar from \"./Components/Navbar\";\r\n//CLOUDINARY\r\nimport service from './api/service';\r\n\r\n\r\nclass App extends Component {\r\n    state = {\r\n      users: [],\r\n      currentUser: null,\r\n      username: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n      imageUrl: \"\",\r\n      bio: \"\",\r\n      imagePost: \"\",\r\n      caption: \"\",\r\n      tags: [],\r\n      imageFile: [],\r\n      comment: '',\r\n      notifications: [],\r\n      showConfirm: false,\r\n      url: \"http://localhost:5000/api/things\",\r\n      postImgUrl: \"http://localhost:5000/api/upload\",\r\n      //appUrl: 'http://localhost:5000',\r\n      appUrl: 'https://thetrishare.herokuapp.com',\r\n     // herokUrl: 'https://trishare.herokuapp.com',\r\n      lastUrl: '/world',\r\n      images: [],\r\n      profileImgDefault: 'https://res.cloudinary.com/thejacex/image/upload/v1572846104/emptyImage_qqqtqp.png',\r\n      selectedFile: null,\r\n      postMade: false,\r\n      message: \"\",\r\n      singlePost: null,\r\n      showEdit: false,\r\n      showSignup: false,\r\n      showLogin: false,\r\n      queryInput: '',\r\n      followContainer: false,\r\n      listFollowers: false,\r\n      listFollowing: false\r\n    };\r\n  \r\n  async componentDidMount() {\r\n    await this.get_data_torender() \r\n    axios.get(`${this.state.appUrl}/auth/loggedin`, {withCredentials: true})\r\n    .then(responseFromBackend => {\r\n      const { userDoc } = responseFromBackend.data\r\n      console.log(userDoc)\r\n      if(userDoc !== undefined){\r\n        setTimeout(() => {this.get_notifications(userDoc._id) }, 500)\r\n      }\r\n      this.syncCurrentUser(userDoc);\r\n    })\r\n    .catch(err => console.log(\"Error while getting the user from the loggedin route \", err))\r\n  }\r\n\r\n\r\n  syncCurrentUser(user){\r\n    this.setState({ currentUser: user})\r\n  }\r\n\r\n\r\n  file_upload_change = e => {\r\n    const formData = new FormData();\r\n    formData.append(\"imageUrl\", e.target.files[0]);\r\n    if(!formData === \"\"){\r\n      this.setState({\r\n        selectedFile: formData\r\n      });\r\n    }\r\n  };\r\n\r\n\r\n  // MAKE A NEW POST\r\n  postNewExp = async(e) => {\r\n    e.preventDefault();\r\n//UPLOAD TO CLOUDINARY\r\nif(this.state.imageFile !== []){\r\nconst uploadData = new FormData();\r\nawait uploadData.append(\"imageUrl\", this.state.imageFile);\r\n service.handleUpload(uploadData)\r\n.then(response => {\r\n    console.log('response is: ', response);\r\n    // after the console.log we can see that response carries 'secure_url' which we can use to update the state \r\n    this.setState({imagePost: response.imageUrl }, () => {\r\n //CALL TO THE NEW POST ROUTE\r\n axios.post(`${this.state.appUrl}/createNewPost`, this.state, {withCredentials: true})\r\n .then(theNewPost => {\r\n     console.log(\"NEW POST!\")\r\n     console.log(theNewPost.data)\r\n     const newPost = theNewPost.data\r\n     const clone = [...this.state.images]\r\n     clone.push(newPost);\r\n     this.setState({postMade: true,\r\n    caption: \"\",\r\n    images: clone,\r\n    imagePost: '',\r\n    tags: [],\r\n    imageFile: []\r\n})\r\n\r\n     setTimeout(\r\n       this.setState({postMade: false}), 1000)\r\n })\r\n .catch(err => console.log(err));\r\n})\r\n      \r\n    })\r\n    .catch(err => {\r\n      console.log(\"Error while uploading the file: \", err);\r\n      console.log(err)\r\n    });\r\n   \r\n  }\r\n}\r\n\r\n  // GET ALL THE POSTS TO RENDER FROM DB\r\n  get_data_torender = async () => {\r\n    try {\r\n      // const {url} = this.state\r\n      await axios.get(`${this.state.appUrl}/createNewPost`).then(response => {\r\n    //    console.log(response)\r\n        this.setState({\r\n          images: response.data\r\n        });\r\n      })\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n    axios.get(`${this.state.appUrl}/users`).then(response => {\r\n    //  console.log(response)\r\n      this.setState({users: response.data})\r\n    })\r\n  };\r\n  //END OF GET ALL THE POSTS TO RENDER FROM DB\r\n\r\n  //GET ALL NOTIFICATIONS FROM DB\r\nget_notifications = async (userId) => {\r\n  try{\r\n    await axios.get(`${this.state.appUrl}/getNotifications/${userId}`).then(response => {\r\n      const notificationList = response.data;\r\n      this.setState({\r\n        notifications: notificationList\r\n      })\r\n    }).catch(err => console.log(err))\r\n    \r\n  } catch (err){\r\n    console.log(err)\r\n  }\r\n}\r\n  //END OF GET ALL NOTIFICATIONS FROM DB\r\n  //uPDATE FORMS VALUES\r\n  updateForm = (e) => {\r\n    console.log(e)\r\n    this.setState({\r\n      [e.currentTarget.name]: e.currentTarget.value\r\n    })\r\n \r\n  }\r\n\r\n  //CHANGE IMAGE URL\r\n  changeImgUrl = (e) => {\r\nthis.setState({imageUrl: e})\r\n  }\r\n\r\n  //CHANGE IMAGE FILES\r\n  changeFile = (e) => {\r\n    console.log(e)\r\n    if(e.size <= 10485760){\r\n    this.setState({imageFile: e,\r\n    message: \"\"})\r\n  }else{\r\n    this.setState({message: \"File size is too big!\"})\r\n  }\r\n  }\r\n\r\n//END OF UPDATE FORM VALUES\r\n\r\n  //START OF SIGN UP\r\n  makeNewUser = (e) => {\r\n    e.preventDefault();\r\n    if(this.state.imageFile.length !== 0){\r\n               //UPLOAD TO CLOUDINARY\r\n               const uploadData = new FormData();\r\n               uploadData.append(\"imageUrl\", this.state.imageFile);\r\n       \r\n               service.handleUpload(uploadData)\r\n               .then(response => {\r\n                   console.log('response is: ', response);\r\n                   // after the console.log we can see that response carries 'secure_url' which we can use to update the state \r\n                   this.setState({ imagePost: response.imageUrl }, () => {\r\n                    //CALL TO THE SIGNUP ROUTE\r\n                    axios.post(`${this.state.appUrl}/auth/signup`, this.state, {withCredentials: true})\r\n                    .then(theData => {\r\n                        console.log(\"NEW USER!\")\r\n                        console.log(theData)\r\n                        this.setState({finished: true,\r\n                          username: \"\",\r\n                            email: \"\",\r\n                            password: \"\",\r\n                            imageUrl: \"\",\r\n                            imageFile: [],\r\n                            showSignupForm: false,\r\n                            showLoginForm: true,\r\n                     })\r\n                    })\r\n                    .catch(err => console.log(err));\r\n                  })\r\n                  \r\n             }).catch(err => {\r\n              console.log(\"Error while uploading the file: \", err);\r\n            })   \r\n                }else{\r\n                   \r\n                   //CALL TO THE SIGNUP ROUTE\r\n                   axios.post(`${this.state.appUrl}/auth/signup`, this.state, {withCredentials: true})\r\n                   .then(theData => {\r\n                       console.log(\"NEW USER!\")\r\n                       console.log(theData)\r\n                       this.setState({finished: true,\r\n                        username: \"\",\r\n                          email: \"\",\r\n                          password: \"\",\r\n                          imageUrl: \"\",\r\n                          imageFile: [],\r\n                   })\r\n                  })\r\n                   .catch(err => console.log(err));\r\n            \r\n                }\r\n                // this.setState({\r\n                //   username: \"\",\r\n                //   email: \"\",\r\n                //   password: \"\",\r\n                //   imageUrl: \"\",\r\n                //   imageFile: [],\r\n                // })\r\n         \r\n}\r\n// END OF SIGN UP\r\n//LOGIN USER\r\nloginUser = (e) => {\r\ne.preventDefault();\r\naxios.post(`${this.state.appUrl}/auth/login`, this.state, {withCredentials: true})\r\n.then(responseFromServer => {\r\n    console.log(responseFromServer.data.userDoc)\r\n    const { userDoc } = responseFromServer.data;\r\n    this.syncCurrentUser(userDoc);\r\n    this.setState({\r\n      username: \"\",\r\n      password: \"\"\r\n    })\r\n  \r\n    alert(\"You are logged in.\")\r\n    if(userDoc !== undefined){\r\n      setTimeout(() => {this.get_notifications(userDoc._id) }, 500)\r\n    }\r\n   \r\n    // return <Redirect to='/profile'/>\r\n})\r\n.catch(err => {\r\n    console.log(err)\r\n    // if(err.response.data) return this.setState({message: err.response.data.message})\r\n})\r\n}\r\n// END OF LOGIN\r\n\r\n// LOG OUT USER\r\nlogoutUser = () => {\r\naxios.delete(`${this.state.appUrl}/auth/logout`, {withCredentials: true})\r\n.then(theUser => {\r\n  console.log(\"DISCONNECTED!\")\r\n  console.log(theUser)\r\n  this.syncCurrentUser(null)\r\n  this.setState({currentUser: null})\r\n})\r\nwindow.location = `/`\r\n}\r\n//END OF LOG OUT USER\r\n//LIKE POST\r\nhandleLike = (e) => {\r\n  axios.post(`${this.state.appUrl}/updateLikes/${e}`, this.state.currentUser, {withCredentials: true})\r\n  .then(responseFromBack => {\r\n    // console.log(responseFromBack.data)\r\n  //  console.log(responseFromBack.data.thePost)\r\n    const newPost = responseFromBack.data\r\n    const clone = [...this.state.images]\r\n    const theIndex = clone.findIndex(postToFind => postToFind._id === newPost._id)\r\n   console.log(clone[theIndex]);\r\n    clone[theIndex].likes = newPost.likes\r\nthis.setState({images: clone}, () => {\r\n  // console.log(this.state.images)\r\n})\r\n  })\r\n  .catch(err => console.log(err));\r\n}\r\n//END OF LIKE POST\r\n\r\n//DELETING POSTS\r\nhandleDelete = (thePostId) => {\r\nconsole.log(thePostId)\r\nconst postArray = [...this.state.images]\r\nconst theIndex = postArray.findIndex(postToFind => postToFind._id === thePostId)\r\nconsole.log(theIndex)\r\n postArray.splice(theIndex, 1)\r\n this.setState({\r\n   images: postArray,\r\n   showConfirm: false\r\n })\r\n axios.post(`${this.state.appUrl}/delete/${thePostId}`, {withCredentials: true})\r\n .then(responseFromBackend => \r\n   window.location = '/home'\r\n  )\r\n .catch(err => console.log(err))\r\n}\r\n\r\n\r\nconfirmDelete = e => {\r\n  this.setState({\r\n    showConfirm: true\r\n  })\r\n}\r\ncancelDelete = e => {\r\n  this.setState({\r\n    showConfirm: false\r\n  })\r\n}\r\n// END OF DELETING POSTS\r\n//EDIT POSTS\r\neditPost = (e, theValue) => {\r\n  console.log(theValue)\r\n  // e.preventDefault();\r\n  const postList = [...this.state.images]\r\n  const theIndex = postList.findIndex(thePost => thePost._id === theValue)\r\n let postToEdit = postList[theIndex]\r\n postToEdit.modal = !postList[theIndex].modal\r\n this.setState({\r\n   images: postList\r\n })\r\n}\r\n\r\nupdatePost = (e, thePost) => {\r\n  e.preventDefault();\r\n  let { caption, tags } = this.state\r\n\r\n  if (tags.length !== 0) {\r\n    tags = tags.split(/[.,\\/ -#]/)\r\n  }\r\n\r\n  const imageList = [...this.state.images];\r\n  const theIndex = imageList.indexOf(thePost)\r\n  let captionToUse = '';\r\n  let tagToUse = []\r\n  let tagsArray = []\r\n  let finalArray = []\r\n  tagToUse = tags\r\n  captionToUse = caption\r\n  if (captionToUse.length === 0) {\r\n    captionToUse = imageList[theIndex].caption\r\n  } if (tagToUse.length === 0) {\r\n    tagToUse = imageList[theIndex].tags\r\n  } else {\r\n    tagsArray = tagToUse\r\n    finalArray = tagsArray.filter(eachTag => { return eachTag !== \"\" })\r\n\r\n    imageList[theIndex].caption = captionToUse\r\n    imageList[theIndex].tags = finalArray\r\n    imageList[theIndex].modal = !imageList[theIndex].modal\r\n\r\n    this.setState({ images: imageList }, () =>\r\n      axios.put(`${this.state.herokUrl}/updatePost/${thePost._id}`, { caption: captionToUse, tags: tagToUse })\r\n        .then(theValues => {\r\n          this.setState({\r\n            caption: '',\r\n            tags: []\r\n          })\r\n          //() => {\r\n          //   window.location = `/post/${thePost._id}`\r\n          // }\r\n        }).catch(err => console.log(\"A problem happened getting the values!\"))\r\n    )\r\n  }\r\n}\r\n//END OF EDIT POST\r\n\r\n//EDIT USER BIO/PICTURE\r\nshowEditUser = () => {\r\n  this.setState({\r\n    showEdit: !this.state.showEdit\r\n  }, () => {\r\n    console.log(this.state.showEdit)\r\n  }) \r\n}\r\n\r\nupdateUser = (e, theUser) => {\r\n  e.preventDefault();\r\n  const { bio, imageFile, currentUser} = this.state\r\n  console.log(this.state.bio)\r\n  console.log(this.state.imageFile)\r\n  if(this.state.imageFile.length !== 0){\r\n    //UPLOAD TO CLOUDINARY\r\n    const uploadData = new FormData();\r\n    uploadData.append(\"imageUrl\", this.state.imageFile);\r\n    service.handleUpload(uploadData)\r\n    .then(response => {\r\n        console.log('response is: ', response);\r\n        // after the console.log we can see that response carries 'secure_url' which we can use to update the state \r\n        this.setState({ imagePost: response.imageUrl }, () => {\r\n         //CALL TO THE SIGNUP ROUTE\r\n         axios.put(`${this.state.appUrl}/auth/updateUser/${currentUser._id}`, { bio, imageFile: this.state.imagePost, currentUser}, {withCredentials: true})\r\n         .then(theData => {\r\n             console.log(\"PROFILE UPDATED!\")\r\n             console.log(theData.data)\r\n             const listUsers = [...this.state.users]\r\n             const {bio, imageUrl} = theData.data\r\n             const theIndex = listUsers.findIndex(theUser => theUser._id === currentUser._id)\r\n             listUsers[theIndex].bio = bio\r\n             listUsers[theIndex].imageUrl = imageUrl\r\n             this.setState({\r\n              users: listUsers,\r\n                imageUrl: \"\",\r\n                imageFile: [],\r\n                showEdit: !this.state.showEdit\r\n         })\r\n         window.location = `/profile/${currentUser._id}`\r\n         }).catch(err => console.log(err));\r\n       })\r\n       \r\n  }).catch(err => {\r\n   console.log(\"Error while uploading the file: \", err);\r\n })   \r\n     }else{\r\n      axios.put(`${this.state.appUrl}/auth/updateUser/${currentUser._id}`, { bio, imageFile, currentUser}, {withCredentials: true})\r\n      .then(theData => {\r\n          console.log(\"PROFILE UPDATED!\")\r\n          console.log(theData.data)\r\n          const listUsers = [...this.state.users]\r\n          const {bio} = theData.data\r\n          const theIndex = listUsers.findIndex(theUser => theUser._id === currentUser._id)\r\n          listUsers[theIndex].bio = bio\r\n          \r\n          this.setState({\r\n            users: listUsers,\r\n              imageUrl: \"\",\r\n              imageFile: [],\r\n              showEdit: !this.state.showEdit\r\n       })\r\n       window.location.reload(); \r\n      })\r\n      .catch(err => console.log(err));\r\n     }\r\n}\r\n//END OF EDIT USER BIO/PICTURE\r\n//FOLLOWING FUNCTIONALITY\r\nhandleFollow = userToFollow => {\r\nconsole.log(userToFollow)\r\nconst { currentUser } = this.state\r\naxios.post(`${this.state.appUrl}/follow/${userToFollow}`, currentUser)\r\n.then(responseFromBackend => {\r\n  console.log(responseFromBackend.data)\r\n  console.log(currentUser._id)\r\n  const userList = [...this.state.users]\r\n  const myUser = this.state.currentUser\r\n  const users = responseFromBackend.data\r\n  const user1 = users[users.findIndex(theUser => theUser._id === currentUser._id)]\r\n  const user2 = users[users.findIndex(theUser => theUser._id === userToFollow)]\r\nconsole.log(user1)\r\nconsole.log(user2)\r\n  const theIndex1 = userList.findIndex(userToFind => userToFind._id === user1._id)\r\n  console.log(theIndex1)\r\n  const theIndex2 = userList.findIndex(userToFind => userToFind._id === user2._id)\r\n  console.log(theIndex2)\r\n  myUser.followers = user1.followers\r\n  myUser.following = user1.following\r\n  userList[theIndex1].followers = user1.followers\r\n  userList[theIndex1].following = user1.following\r\n  userList[theIndex2].followers = user2.followers\r\n  userList[theIndex2].following = user2.following\r\n  console.log(\"NEW USER LIST\")\r\n  console.log(userList)\r\n  this.setState({users: userList,\r\n  currentUser: myUser})\r\n})\r\n}\r\n//END OF FOLLOWING FUNCTIONALITY\r\n// ADD COMMENTS\r\nhandleComment = (e, postId) => {\r\n  e.preventDefault();\r\n  console.log(this.state.comment)\r\n  console.log(postId)\r\n  const newComment = {\r\n    owner: this.state.currentUser,\r\n    message: this.state.comment\r\n  }\r\n  const clone = [...this.state.images]\r\n  console.log(clone.findIndex(thePost => thePost._id === postId))\r\n  const theIndex = clone.findIndex(thePost => thePost._id === postId)\r\nif(theIndex >= 0){\r\n  clone[theIndex].comments.push({user: {\r\n    _id: this.state.currentUser._id,\r\n    username: this.state.currentUser.username,\r\n    imageUrl: this.state.currentUser.imageUrl\r\n  }, comment: this.state.comment})\r\n}\r\nthis.setState({\r\n  images: clone,\r\n  comment: ''\r\n})\r\n  axios.put(`${this.state.appUrl}/addComment/${postId}`, newComment)\r\n  .then(responseFromBackend => console.log(responseFromBackend))\r\n  .catch(err => console.log(err))\r\n}\r\n\r\n//END OF ADD COMMENTS\r\n//DISPLAY FOLLOWING FOLLOWERS LIST CONTAINER\r\nshowFollow = (e) => {\r\n  e.preventDefault();\r\n  console.log(e.currentTarget.innerHTML)\r\n  let theChoice = e.currentTarget.innerHTML \r\n  if(theChoice === 'Followers:'){\r\n    this.setState({\r\n      followContainer: !this.state.followContainer,\r\n      listFollowers: true,\r\n      listFollowing: false\r\n    })\r\n  }else{\r\n    this.setState({\r\n      followContainer: !this.state.followContainer,\r\n      listFollowers: false,\r\n      listFollowing: true\r\n    })\r\n  }\r\n} \r\n\r\n//DISPLAY LOGIN FORM\r\nshowLoginForm = (e) => {\r\n  e.preventDefault();\r\n  this.setState({\r\n    showLogin: !this.state.showLogin\r\n  })\r\n}\r\n\r\n//DISPLAY SIGNUP FORM\r\nshowSignupForm = (e) => {\r\n  e.preventDefault();\r\n  this.setState({\r\n    showSignup: !this.state.showSignup\r\n  })\r\n}\r\n\r\n//EXIT LOGIN FORM\r\nexitLogin = (e) => {\r\n  e.preventDefault();\r\n  this.setState({\r\n    showLogin: false\r\n  })\r\n}\r\n\r\n// EXIT SIGNUP FORM\r\nexitSignup = (e) => {\r\n  e.preventDefault();\r\n  this.setState({\r\n    showSignup: false\r\n  })\r\n}\r\n\r\n//DISPLAY FOLLOWER/FOLLOWING LIST\r\nshowFollowers = (e, theValue) => {\r\n  e.preventDefault()\r\n  let theChoice = e.target.innerHTML\r\n  // console.log(theValue)\r\n  if(theChoice === 'Followers'){\r\n    this.setState({\r\n      listFollowers: true,\r\n      listFollowing: false\r\n    })\r\n  }else{\r\n    console.log(\"FOLLOWING!\")\r\n    this.setState({\r\n      listFollowers: false,\r\n      listFollowing: true\r\n    })\r\n  }\r\n}\r\n//CHANGE QUERY WITH TAGS\r\nupdateQueryBar = (theTag) => {\r\n  // console.log(theTag)\r\n  this.setState({\r\n    queryInput: theTag \r\n  })\r\n}\r\n\r\n  render() {\r\n    // console.log(\"CURRENT USER\")\r\n    // console.log(this.state.currentUser)\r\n    // console.log(this.state.appUrl);\r\n    return (\r\n      <div className=\"App\">\r\n       \r\n        <NavBar currentUser={this.state.currentUser} notifications={this.state.notifications} revealLoginForm={this.showLoginForm} revealSignupForm={this.showSignupForm} logoutUser={this.logoutUser} lastUrl={this.state.lastUrl}   onLogout={this.logoutUser} actualUrl={window.location}/>\r\n        <Switch>\r\n        <Route exact path=\"/\" render={(props) => !this.state.currentUser ? <Home {...props} showSignup={this.state.showSignup} showLogin={this.state.showLogin} exitLogin={this.exitLogin} exitSignup={this.exitSignup} onChangeValue={this.updateForm} changeFile={this.changeFile} handleSubmit={this.loginUser} handleSignUp={this.makeNewUser} onUserChange = { userDoc => this.syncCurrentUser(userDoc)} currentUser = {this.state.currentUser} formValues={this.state}/> : (<Redirect to=\"/home\"/>)}/>\r\n        <Route path=\"/world\" render={(props) =>  <WorldPost {...props} allPosts={this.state.images} renderPosts={this.worldRender} handleLike={this.handleLike} currentUser={this.state.currentUser} query={this.state.queryInput} onChangeValue={this.updateForm} />}/>\r\n        <Route exact path=\"/home\" render={(props) => (<HomeFeed {...props} allPosts={this.state.images} currentUser={this.state.currentUser} handleLike={this.handleLike} />) }/>\r\n        <Route exact path=\"/newPost\" render={(props) => <PostForm {...props} handleSubmit={this.postNewExp} changeFile={this.changeFile} changeUrl={this.changeImgUrl} onChangeValue={this.updateForm} formValues={this.state}/>}/>\r\n        <Route exact path=\"/post/:id\" render={(props) => <SinglePost {...props} postValues={this.state.images} onDelete={this.handleDelete} cancelDelete={this.cancelDelete} confirmDelete={this.confirmDelete} showConfirm={this.state.showConfirm} handleLike={this.handleLike} handleEdit={this.editPost} updatePost={this.updatePost} currentUser={this.state.currentUser} onChangeValue={this.updateForm} comment={this.state.comment} handleComment={this.handleComment} updateQuery={this.updateQueryBar}/>}></Route>\r\n        <Route exact path=\"/profile/:id\" render={(props) => \r\n          this.state.currentUser ? \r\n          (<UserProfile {...props} \r\n            images = {this.state.images} \r\n            currentUser = {this.state.currentUser} \r\n            users={this.state.users}\r\n            showEdit={this.state.showEdit} \r\n            handleFollow={this.handleFollow}\r\n            onChangeValue={this.updateForm}\r\n            handleEditProfile={this.showEditUser}\r\n            changeFile={this.changeFile}\r\n            updateUser={this.updateUser}\r\n            handleShowFollow = {this.showFollow}\r\n            followContainer = {this.state.followContainer}\r\n            showFollowers = {this.showFollowers}\r\n            listFollowing = {this.state.listFollowing}\r\n            listFollowers = {this.state.listFollowers}\r\n            />) : \r\n          (<Redirect to=\"/login\"/>)}/>\r\n        \r\n        </Switch>\r\n        \r\n        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n//<Route exact path=\"/\">{this.state.images && this.renderImages()}</Route>\r\nexport default App;\r\n//OLD CODE \r\n // renderImages = () => {\r\n  //   const {images} = this.state.images\r\n  //   return images.map(image => {\r\n  //     return (\r\n  //       <div>\r\n  //       <div>\r\n  //       <ThreeMap \r\n  //         key={image._id}\r\n  //         {...image}\r\n  //         url={image.imageUrl}\r\n  //       />\r\n  //       </div>\r\n  //       <div>HELLO MY NAME IS JESUS </div>\r\n  //       </div>\r\n  //     )\r\n  //   })\r\n  // };\r\n  //SINGLE POST\r\n// getData = async() => { \r\n//   // return this.props.myUrl\r\n//   try {\r\n//       await axios.get(`http://localhost:5000${this.props.match.url}`).then(response => {\r\n//         this.setState({\r\n//           images: response.data\r\n//         });\r\n//       });\r\n//     } catch (err) {\r\n//       console.log(err);\r\n//     }\r\n// }\r\n//END SINGLE POST\r\n //OLD WAY OF MAKE A NEW POST\r\n  // post_new_experience = async e => {\r\n  //   try{\r\n  //   e.preventDefault();\r\n  //   const { postImgUrl } = this.state;\r\n  //   const clone = [...this.state.images];\r\n  //   await axios.post(postImgUrl, this.state.selectedFile)\r\n  //   .then(response => {\r\n  //     clone.push(response.data);\r\n  //     this.setState({\r\n  //       images: clone\r\n  //     });\r\n  //   });\r\n  // }catch(err){\r\n  //   console.log(err)\r\n  // }  \r\n  // };\r\n  // END OF MAKE A NEW POST\r\n\r\n\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n    <BrowserRouter>\n    <App />\n    </BrowserRouter>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}